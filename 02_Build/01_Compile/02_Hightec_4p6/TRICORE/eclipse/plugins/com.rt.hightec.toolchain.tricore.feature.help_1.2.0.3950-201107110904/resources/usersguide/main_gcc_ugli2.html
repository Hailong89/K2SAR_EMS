<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>TriCore Sections</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- html,3,sections+,info,next,refcaption,fn-in,xhtml,word,charset=iso-8859-1,fn-in --> 
<meta name="src" content="main_gcc_ug.tex" /> 
<meta name="date" content="2011-07-07 13:15:00" /> 
<link rel="stylesheet" type="text/css" href="main_gcc_ug.css" /> 
</head><body 
>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="main_gcc_ugse46.html" >next</a>] [<a 
href="main_gcc_ugse45.html" >prev</a>] [<a 
href="main_gcc_ugse45.html#tailmain_gcc_ugse45.html" >prev-tail</a>] [<a 
href="#tailmain_gcc_ugli2.html">tail</a>] [<a 
href="main_gcc_ugch20.html#main_gcc_ugli2.html" >up</a>] </p></div>
<h3 class="likesectionHead"><a 
href="main_gcc_ug.html#QQ2-71-145" id="x71-13700020.2.1">TriCore Sections</a></h3>
<!--l. 3--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.startup_code</span></span>    </dt><dd 
class="list">
                  <!--l. 4--><p class="noindent" ><a 
 id="dx71-137001"></a> The  startup  code  for  TriCore  is  stored  in  an  own  section  named
                  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">startup_code</span></span>. Per default the code of <span 
class="cmtt-12">crt0 </span>is stored at the address
                  <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">xa0000000</span></span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.init, .fini, .jcr</span></span> </dt><dd 
class="list">
                  <!--l. 6--><p class="noindent" ><a 
 id="dx71-137002"></a><a 
 id="dx71-137003"></a> The input sections <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">init</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">fini</span></span> are located in the output section
                  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">init</span></span>. The function <span class="lstinline"><span 
class="ecss-1200">__main</span></span> will no longer be generated. The section
                  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">init</span></span> contains the calls of all constructors, <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">fini</span></span> contains the calls of
                  all destructors and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">jcr</span></span> contains java constructors. The section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">jcr</span></span> is
                  located at the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">rodata</span></span> section. In the file <span 
class="cmtt-12">crti.o</span>, the symbol <span class="lstinline"><span 
class="ecss-1200">_init</span></span> is
                  defined in the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">init</span></span> section, and the symbol <span class="lstinline"><span 
class="ecss-1200">_fini</span></span> is defined in the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">fini</span></span>
                  section. The file <span 
class="cmtt-12">crtn.o </span>contains the definition of the function epilog
                  with the return instruction of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">init</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">fini</span></span> section. The symbol
                  <span class="lstinline"><span 
class="ecss-1200">_init</span></span> is called as a function before main from the startup file <span 
class="cmtt-12">crt0.o</span>.
                  The section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">fini</span></span> will be generated to hold the code which has to be
                  executed before <span class="lstinline"><span 
class="ecss-1200">_exit</span></span> (see <a 
href="main_gcc_ugch13.html#x34-4500013">Listing 13</a>).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.traptab, .inttab</span></span> </dt><dd 
class="list">
                  <!--l. 10--><p class="noindent" ><a 
 id="dx71-137004"></a> <a 
 id="dx71-137005"></a>The traptable and the interrupt tables have now their own sections
                  which will be allocated by default after the startup code.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.csa</span></span>              </dt><dd 
class="list">
                  <!--l. 14--><p class="noindent" ><a 
 id="dx71-137006"></a>  The  CSA  memory  is  defined  in  an  own  section  to  let  the
                  linker  known  about  the  occupied  memory.  The  size  of  the  CSA  is
                  calculated dynamically from the size of the internal RAM (defined by
                  <span class="lstinline"><span 
class="ecss-1200">__INT_DATA_RAM_SIZE</span></span>) and the sizes of the absolute addressable
                  section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">zdata</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">zbss</span></span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.toc</span></span>              </dt><dd 
class="list">
                                                                                       
                                                                                       
                  <!--l. 16--><p class="noindent" ><a 
 id="dx71-137007"></a> The ”.toc” section was used to store data that can be quickly addressed
                  using a function’s toc pointer (<span class="lstinline"><span 
class="ecss-1200">%</span><span 
class="ecss-1200">a12</span></span>). The compiler was changed to
                  not create the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">toc</span></span>-Section any more.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.text</span></span>             </dt><dd 
class="list">
                  <!--l. 18--><p class="noindent" >All <a 
 id="dx71-137008"></a>code in this section will be situated in <span 
class="cmmi-12"><font face="Symbol">m</font></span>C ROM.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.pcptext</span></span>         </dt><dd 
class="list">
                  <!--l. 20--><p class="noindent" ><a 
 id="dx71-137009"></a> Enters the PCP (Peripheral Control Processor) text section; if this
                  section doesn’t exist already, it will be created automatically. The PCP
                  text section is used to store PCP code. Upon entering this section,
                  <span 
class="cmtt-12">tricore-as</span> expects PCP mnemonics instead of TriCore instructions;
                  you can return to the normal behavior simply by leaving the PCP text
                  section, e.g. with <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>, which (re-) enters the TriCore text section. This
                  makes it possible to embed PCP programs as inline assembler in C or
                  C++ modules, provided you’re using the TriCore port of GCC, the
                  GNU compiler collection.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.rodata</span></span>          </dt><dd 
class="list">
                  <!--l. 22--><p class="noindent" ><a 
 id="dx71-137010"></a>
                  </p><!--l. 24--><p class="noindent" >The ”.rodata” section is used to store read-only data (e.g., constants).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.sdata.rodata</span></span>    </dt><dd 
class="list">
                  <!--l. 26--><p class="noindent" ><a 
 id="dx71-137011"></a> The section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">srodata</span></span> is renamed to <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">sdata</span><span 
class="ecss-1200">.</span><span 
class="ecss-1200">rodata</span></span>. This section is used
                  to store read-only data (e.g., constants) that can be quickly addressed
                  using the small data area pointer (%a0).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.sdata</span></span>            </dt><dd 
class="list">
                  <!--l. 28--><p class="noindent" ><a 
 id="dx71-137012"></a> The ”.sdata” section is used to store initialized data that can be
                  quickly addressed using the small data area pointer (%a0).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.pcpdata</span></span>         </dt><dd 
class="list">
                  <!--l. 30--><p class="noindent" ><a 
 id="dx71-137013"></a> The PCP data section is used to store contexts and parameters for
                  the PCP.
</p>
                  <div class="center" 
>
                                                                                       
                                                                                       
<!--l. 32--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox99"><span 
class="cmbx-12">Note:</span><br 
class="newline" />The PCP can access this section only word-wise (i.e., in quantities of
32 bits), so you should only use <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">word</span></span> pseudo-ops to fill it, even though
<span 
class="cmtt-12">tricore-as</span> also accepts <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">byte</span></span>, <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">half</span></span> and other pseudo-ops that can be
used to define memory values of various sizes.                      </div>
</div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.zdata</span></span>            </dt><dd 
class="list">
                  <!--l. 34--><p class="noindent" ><a 
 id="dx71-137014"></a> The ”.zdata” section is used to store initialized data that can be quickly
                  addressed using TriCore’s absolute addressing mode.
</p>
                  <div class="center" 
>
<!--l. 36--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox100"><span 
class="cmbx-12">Note:</span><br 
class="newline" />If you define your own sections with data addressed in the absolute
addressing mode, these sections must have the prefix <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">zdata</span><span 
class="ecss-1200">.</span></span>        </div>
</div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.sbss</span></span>             </dt><dd 
class="list">
                  <!--l. 39--><p class="noindent" ><a 
 id="dx71-137015"></a> The ”.sbss” section is used to store uninitialized data that can be quickly
                  addressed using the small data area pointer (%a0).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.bbss</span></span>             </dt><dd 
class="list">
                  <!--l. 41--><p class="noindent" ><a 
 id="dx71-137016"></a> The ”.bbss” section is used to store uninitialized bit data.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.zbss</span></span>             </dt><dd 
class="list">
                  <!--l. 43--><p class="noindent" ><a 
 id="dx71-137017"></a> The ”.zbss” section is used to store uninitialized data that can be quickly
                  addressed using TriCore’s absolute addressing mode.
</p>
                  <div class="center" 
>
                                                                                       
                                                                                       
<!--l. 45--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox101"><span 
class="cmbx-12">Note:</span><br 
class="newline" />If you define your own sections with data addressed in the absolute
addressing mode, these sections must have the prefix <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">zbss</span><span 
class="ecss-1200">.</span></span>          </div>
</div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.eh_frame</span></span>        </dt><dd 
class="list">
                  <!--l. 47--><p class="noindent" >Exception handling frame used for C++ exceptions.
</p>
                  <div class="center" 
>
<!--l. 49--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox102"><span 
class="cmbx-12">Note:</span><br 
class="newline" />This  section  is  renamed  in  <span class="lstinline"><span 
class="ecss-1200">gcc_except_table</span></span>  in  new  version  of
<span 
class="cmtt-12">tricore-gcc</span>                                                      </div>
</div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.ctors</span></span>            </dt><dd 
class="list">
                  <!--l. 51--><p class="noindent" ><a 
 id="dx71-137018"></a> Used for constructors.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.dtors</span></span>            </dt><dd 
class="list">
                  <!--l. 53--><p class="noindent" ><a 
 id="dx71-137019"></a> Used for destructors.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.bdata</span></span>            </dt><dd 
class="list">
                  <!--l. 55--><p class="noindent" ><a 
 id="dx71-137020"></a> This section is used for bit variables.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.version_info</span></span>    </dt><dd 
class="list">
                  <!--l. 57--><p class="noindent" ><a 
 id="dx71-137021"></a>
                  </p><!--l. 61--><p class="noindent" >This section will be generated if the option <span 
class="cmtt-12">-mversion-info</span> is set. Every file
                  that is compiled with this option contains the version information of
                  the compiler, which was used to compile the file, in the section
                  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">version_info</span></span> in the object file. In this section this configuration info is
                  available:
</p>
                                                                                       
                                                                                       
                       <ul class="itemize1">
                       <li class="itemize">Filename of the source file
                       </li>
                       <li class="itemize">Options passed to the compiler
                       </li>
                       <li class="itemize">Version Information of the compiler
                       </li></ul>
                  <!--l. 73--><p class="noindent" >See <a 
href="main_gcc_ugch23.html#x93-24900023">Listing 23</a> for details.
                  </p><!--l. 75--><p class="noindent" >Per default the option <span 
class="cmtt-12">-mversion-info</span> is set. To compile a file use the
                  option <span 
class="cmtt-12">-c</span>:
                  </p><!--l. 77--><p class="noindent" ><span 
class="cmtt-12">tricore-gcc</span> <span 
class="cmtt-12">-c &#x003C;filename&#x003E;.c</span>
                  </p><!--l. 79--><p class="noindent" >With the tool tricore-objdump and the option <span 
class="cmtt-12">-h</span> the section headers of an
                  object file are displayed:
                  </p><!--l. 81--><p class="noindent" ><span 
class="cmtt-12">tricore-objdump</span> <span 
class="cmtt-12">-h &#x003C;filename&#x003E;.o</span>
                  </p><!--l. 83--><p class="noindent" >The contents of section the section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">version_info</span></span> is shown by using
                  tricore-objdump with following options:
                  </p><!--l. 85--><p class="noindent" ><span 
class="cmtt-12">tricore-objdump</span> <span 
class="cmtt-12">-s --section=.version</span><span 
class="cmtt-12">_info </span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">&#x003C;filename&#x003E;.o</span><span 
class="cmmi-12">&#x003E;</span>
                  </p><!--l. 87--><p class="noindent" >If you compile a file with the compileroption <span 
class="cmtt-12">-mno-version-info</span> the section
                  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">version_info</span></span> does not exist.
</p>
                  <div class="center" 
>
<!--l. 89--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox103"><span 
class="cmbx-12">Note:</span><br 
class="newline" />All compiler libraries are compiled with <span 
class="cmtt-12">-mversion-info</span> and have
a  section  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">version_info</span></span>.  Therefore  a  linked  file  will  always  contain
a  section  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">version_info</span></span>,  which  contains  the  version  info  of  the
libraries that were linkd to the executable file, even if the option
<span 
class="cmtt-12">-mno-version-info</span> is passed to the compiler.                      </div>
</div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.pictext</span></span>         </dt><dd 
class="list">
                  <!--l. 91--><p class="noindent" ><a 
 id="dx71-137022"></a> <a 
 id="dx71-137023"></a>Section for position independent code.
                                                                                       
                                                                                       
</p>
                  <div class="center" 
>
<!--l. 94--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox104"><span 
class="cmbx-12">Note:</span><br 
class="newline" />If the option <span 
class="cmtt-12">-mcode-pic</span> is set the code will be put in an own section
called <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">pictext</span></span> instead of the standard section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>.                 </div>
</div>
                  </dd></dl>
<!--l. 54--><p class="noindent" >The <span 
class="cmtt-12">tricore-ld</span> is controlled by a scripting language. If you do not specify a script, the one
that was compiled into the linker when it is installed is used by default. You can override this
default and provide your own script.
</p><!--l. 56--><p class="noindent" ><span 
class="cmtt-12">tricore-ld</span> <span 
class="cmtt-12">-T sprig.link start.o loop.o -o sprig</span>
</p><!--l. 58--><p class="noindent" >The <span 
class="cmtt-12">-T</span> option specifies the name of your own script file <span 
class="cmtt-12">sprig.link</span>. The <span 
class="cmtt-12">-c</span> is a synonym of
the <span 
class="cmtt-12">-T</span> option.
</p><!--l. 60--><p class="noindent" >The primary reason for using a special script is the addressing scheme. Normally the linker
produces an executable file with adjustable addresses that can be set at the time the module is
loaded into memory. </p>
<div class="center" 
>
<!--l. 61--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox105"><span 
class="cmbx-12">Note:</span><br 
class="newline" />You  can  use  the  <span 
class="cmtt-12">--verbose</span> command  line  option  to  display  the
default linker script. Certain command line options, such as <span 
class="cmtt-12">-r</span> or <span 
class="cmtt-12">-N</span>,
will affect the default linker script.                                 </div>
</div>
<!--l. 63--><p class="noindent" >With an embedded module, all addresses are resolved by the linker into absolute locations so
that every addressing reference is completely resolved and immovable. This process of locking
down the address is known as <span 
class="cmti-12">locating </span>the module. Some systems have a separate utility that
processes the relocatable output from the linker into an absolute module, but the <span 
class="cmtt-12">tricore-ld</span>
has the locator built in.
</p><!--l. 65--><p class="noindent" >The linker reads object files produced by the compiler and combines them into a new object file
(also called an executable file) as its output. An object file is divided into sections. Each section
has a name and a size. The linker combines the input sections of the same name into a single
output section. Some sections contain executable code, some contain data with initial values,
                                                                                       
                                                                                       
and others contain uninitialized data. A section with uninitialized data usually has
nothing other than a name and a size. You may also use linker scripts implicitly by
naming them as input files to the linker, as though they were files to be linked (see
<a 
href="#x71-18100020.2.22">Listing 20.2.22</a>).
</p><!--l. 68--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.2</span>  <a 
href="#x71-13800020.2.2" id="x71-13800020.2.2">Basic Linker Script Concepts</a></h4>
<a 
 id="dx71-138001"></a>
<!--l. 70--><p class="noindent" >We need to define some basic concepts and vocabulary in order to describe the linker script
language.
</p><!--l. 72--><p class="noindent" >The linker combines input files into a single output file. The output file and each input file are
in a special data format known as an <span 
class="cmsl-12">object file format</span>. Each file is called an <span 
class="cmsl-12">object file</span>. The
output file is often called an <span 
class="cmsl-12">executable</span>, but for our purposes we will also call it an object file.
Each object file has, among other things, a list of <span 
class="cmsl-12">sections</span>. We sometimes refer to a section in
an input file as an <span 
class="cmsl-12">input section</span>; similarly, a section in the output file is an <span 
class="cmsl-12">output</span>
<span 
class="cmsl-12">section</span>.
</p><!--l. 75--><p class="noindent" >Each section in an object file has a name and a size. Most sections also have an associated block
of data, known as the <span 
class="cmsl-12">section contents</span>. A section may be marked as <span 
class="cmsl-12">loadable</span>, which mean that
the contents should be loaded into memory when the output file is run. A section with no
contents may be <span 
class="cmsl-12">allocatable</span>, which means that an area in memory should be set aside, but
nothing in particular should be loaded there (in some cases this memory must be zeroed out). A
section which is neither loadable nor allocatable typically contains some sort of debugging
information.
</p><!--l. 77--><p class="noindent" >Every loadable or allocatable output section has two addresses:
      </p><dl class="description"><dt class="description">
<span 
class="cmssbx-10x-x-120">VMA</span> </dt><dd 
class="description">Virtual memory address used internally by the module when it is run.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">LMA</span> </dt><dd 
class="description">Loadable memory address specifying where the section is to be loaded.</dd></dl>
<!--l. 87--><p class="noindent" >In most cases the two addresses will be the same. An example of when they might be different is
when a data section is loaded into ROM, and then copied into RAM when the program starts
up (this technique is often used to initialize global variables in a ROM based system). In this
case the ROM address would be the LMA, and the RAM address would be the VMA.
</p>
<div class="center" 
>
<!--l. 89--><p class="noindent" >
                                                                                       
                                                                                       
</p>
<div 
class="colorbox" id="colorbox106"><span 
class="cmbx-12">Note:</span><br 
class="newline" />You can see the sections in an object file by using the <span 
class="cmtt-12">-h</span> option with
<span 
class="cmtt-12">tricore-objdump</span> program.                                        </div>
</div>
<!--l. 90--><p class="noindent" >Every object file also has a list of <span 
class="cmsl-12">symbols</span>, known as the <span 
class="cmsl-12">symbol table</span>. A symbol may be
defined or undefined. Each symbol has a name, and each defined symbol has an address, among
other information. If you compile a C or C++ program into an object file, you will get a
defined symbol for every defined function and global or static variable. Every undefined
function or global variable which is referenced in the input file will become an undefined
symbol.
</p>
<div class="center" 
>
<!--l. 92--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox107"><span 
class="cmbx-12">Note:</span><br 
class="newline" />You can see the symbols in an object file by using the <span 
class="cmtt-12">tricore-nm</span>
program,  or  by  using  the  <span 
class="cmtt-12">tricore-objdump</span> program  with  the  <span 
class="cmtt-12">-t</span>
option.                                                            </div>
</div>
<!--l. 94--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.3</span>  <a 
href="#x71-13900020.2.3" id="x71-13900020.2.3">Linker Script Format</a></h4>
<a 
 id="dx71-139001"></a>
<!--l. 96--><p class="noindent" >Linker scripts are text files.
</p><!--l. 98--><p class="noindent" >You write a linker script as a series of commands. Each command is either a <span 
class="cmsl-12">keyword</span>, possibly
followed by arguments, or an assignment to a symbol. You may separate commands using
semicolons. Whitespace is generally ignored.
</p><!--l. 100--><p class="noindent" >Strings such as file or format names can normally be entered directly. If the file name contains a
character such as a comma which would otherwise serve to separate file names, you may put the
file name in double quotes. There is no way to use a double quote character in a file
name.
</p><!--l. 102--><p class="noindent" >You may include comments in linker scripts just as in C, delimited by <span class="lstinline"><span 
class="ecss-1200">/</span><span 
class="cmsy-10x-x-120">*</span></span> and <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">/</span></span>. As in C,
comments are syntactically equivalent to whitespace.
                                                                                       
                                                                                       
</p><!--l. 104--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.4</span>  <a 
href="#x71-14000020.2.4" id="x71-14000020.2.4">Simple Linker Script Example</a></h4>
<a 
 id="dx71-140001"></a>
<a 
 id="dx71-140002"></a>
<!--l. 106--><p class="noindent" >Many linker scripts are fairly simple.
</p><!--l. 108--><p class="noindent" >The simplest possible linker script has just one command: <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span>. You use the command
<span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> to describe the memory layout of the output file.
</p><!--l. 110--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command is a powerful command. Here we will describe a simple use of it. Let’s
assume your program consists only of code, initialized data, and uninitialized data. These will
be in the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>, <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span>, and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> sections, respectively. Let’s assume further that these are the only
sections which appear in your input files.
</p><!--l. 113--><p class="noindent" >For this example, let’s say that the code should be loaded at address 0x10000, and that
the data should start at address 0x8000000. Here is a linker script which will do
that:
</p><!--l. 115--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb214"><a 
 id="x71-140004r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-140006r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-140008r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x10000;</span><br class="fancyvrb" /><a 
 id="x71-140010r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-140012r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span>
<br class="fancyvrb" /><a 
 id="x71-140014r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-140016r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x8000000;</span><br class="fancyvrb" /><a 
 id="x71-140018r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-140020r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span>
<br class="fancyvrb" /><a 
 id="x71-140022r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-140024r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .bss</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-140026r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.bss)</span><br class="fancyvrb" /><a 
 id="x71-140028r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-140030r14"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 132--><p class="noindent" >You write the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command as the keyword <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span>, followed by a series of symbol
assignments and output section descriptions enclosed in curly braces.
</p><!--l. 134--><p class="noindent" >The first entry inside the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command of the above example sets the value of the
special symbol <span class="lstinline"><span 
class="ecss-1200">.</span></span>, which is the location counter. If you do not specify the address of an output
section in some other way (other ways are described later), the address is set from the current
value of the location counter. The location counter is then incremented by the size of the output
section. At the start of the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command, the location counter has the value
<span class="lstinline"><span 
class="ecss-1200">0</span></span>.
</p><!--l. 136--><p class="noindent" >The second entry defines an output section, <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>. The colon is required syntax which may be
ignored for now. Within the curly braces after the output section name, you list the names of
the input sections which should be placed into this output section. The <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span></span> is a wildcard which
matches any file name. The expression <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">text</span><span 
class="ecss-1200">)</span></span> means all <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> input sections in all input
files.
</p><!--l. 138--><p class="noindent" >Since the location counter is <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x10000</span></span> when the output section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> is defined, the linker will set
the address of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section in the output file to be <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x10000</span></span>.
                                                                                       
                                                                                       
</p><!--l. 140--><p class="noindent" >The remaining lines define the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> sections in the output file. The linker will place the
<span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> output section at address <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x8000000</span></span>. After the linker places the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> output section, the
value of the location counter will be <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x8000000</span></span> plus the size of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> output section. The
effect is that the linker will place the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> output section immediately after the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> output
section in memory
</p><!--l. 142--><p class="noindent" >The linker will ensure that each output section has the required alignment, by increasing the
location counter if necessary. In this example, the specified addresses for the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span>
sections will probably satisfy any alignment constraints, but the linker may have to create a
small gap between the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> sections. </p>
<div class="center" 
>
<!--l. 143--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox108"><span 
class="cmbx-12">Note:</span><br 
class="newline" />That’s it! That’s a simple and complete linker script.               </div>
</div>
<!--l. 1--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.5</span>  <a 
href="#x71-14100020.2.5" id="x71-14100020.2.5">Call interface to the linker</a></h4>
<!--l. 3--><p class="noindent" >If the linker can not recognize the format of an object file, it will assume that it is a linker
script. A script specified in this way augments the main linker script used for the link. The
compiler passes a file <span 
class="cmtt-12">memory.x </span>to the linker right after the startup file <span 
class="cmtt-12">crt0.o</span>. The file
<span 
class="cmtt-12">memory.x </span>contains the default memory description of the CPU derivate. Specifying the derivate
by the option <span 
class="cmtt-12">-mcpu=tc1796</span> the corresponding <span 
class="cmtt-12">memory.x </span>for e.g. TC1796 is selected. The
<span 
class="cmtt-12">memory.x </span>file looks like:
</p><!--l. 5--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb215"><a 
 id="x71-141002r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><br class="fancyvrb" /><a 
 id="x71-141004r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;</span><span 
class="pcrr7t-x-x-144"> memory.x</span><span 
class="pcrr7t-x-x-144"> --</span><span 
class="pcrr7t-x-x-144"> The</span><span 
class="pcrr7t-x-x-144"> default</span><span 
class="pcrr7t-x-x-144"> memory</span><span 
class="pcrr7t-x-x-144"> description</span><br class="fancyvrb" /><a 
 id="x71-141006r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;</span>
<br class="fancyvrb" /><a 
 id="x71-141008r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;</span><span 
class="pcrr7t-x-x-144"> Copyright</span><span 
class="pcrr7t-x-x-144"> (C)</span><span 
class="pcrr7t-x-x-144"> 2005</span><span 
class="pcrr7t-x-x-144"> HighTec</span><span 
class="pcrr7t-x-x-144"> EDV-Systeme</span><span 
class="pcrr7t-x-x-144"> GmbH.</span>
<br class="fancyvrb" /><a 
 id="x71-141010r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;</span><br class="fancyvrb" /><a 
 id="x71-141012r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span><br class="fancyvrb" /><a 
 id="x71-141014r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> __TC1796__</span><span 
class="pcrr7t-x-x-144"> __TC13__</span><span 
class="pcrr7t-x-x-144"> with</span><span 
class="pcrr7t-x-x-144"> Core</span><span 
class="pcrr7t-x-x-144"> TC1.3</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-141016r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __TRICORE_DERIVATE_MEMORY_MAP__</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x1796;</span>
<br class="fancyvrb" /><a 
 id="x71-141018r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> the</span><span 
class="pcrr7t-x-x-144"> external</span><span 
class="pcrr7t-x-x-144"> RAM</span><span 
class="pcrr7t-x-x-144"> description</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-141020r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __EXT_CODE_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xa1000000;</span><br class="fancyvrb" /><a 
 id="x71-141022r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __EXT_CODE_RAM_SIZE</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 512K</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-141024r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __EXT_DATA_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xa1080000;</span><br class="fancyvrb" /><a 
 id="x71-141026r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __EXT_DATA_RAM_SIZE</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 512K;</span>
                                                                                       
                                                                                       
<br class="fancyvrb" /><a 
 id="x71-141028r14"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __RAM_END</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> __EXT_DATA_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> __EXT_DATA_RAM_SIZE;</span>
<br class="fancyvrb" /><a 
 id="x71-141030r15"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> the</span><span 
class="pcrr7t-x-x-144"> internal</span><span 
class="pcrr7t-x-x-144"> ram</span><span 
class="pcrr7t-x-x-144"> description</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span><br class="fancyvrb" /><a 
 id="x71-141032r16"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __INT_CODE_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xd4000000;</span>
<br class="fancyvrb" /><a 
 id="x71-141034r17"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __INT_CODE_RAM_SIZE</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 48K;</span><br class="fancyvrb" /><a 
 id="x71-141036r18"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __INT_DATA_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xd0000000;</span>
<br class="fancyvrb" /><a 
 id="x71-141038r19"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __INT_DATA_RAM_SIZE</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 56K;</span><br class="fancyvrb" /><a 
 id="x71-141040r20"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> the</span><span 
class="pcrr7t-x-x-144"> pcp</span><span 
class="pcrr7t-x-x-144"> memory</span><span 
class="pcrr7t-x-x-144"> description</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-141042r21"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __PCP_CODE_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xf0060000;</span><br class="fancyvrb" /><a 
 id="x71-141044r22"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __PCP_CODE_RAM_SIZE</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 32K;</span>
<br class="fancyvrb" /><a 
 id="x71-141046r23"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __PCP_DATA_RAM_BEGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xf0050000;</span><br class="fancyvrb" /><a 
 id="x71-141048r24"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __PCP_DATA_RAM_SIZE</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 16K;</span>
<br class="fancyvrb" /><a 
 id="x71-141050r25"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><br class="fancyvrb" /><a 
 id="x71-141052r26"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> MEMORY</span><br class="fancyvrb" /><a 
 id="x71-141054r27"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-141056r28"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ext_cram</span><span 
class="pcrr7t-x-x-144"> (arx):</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xa1000000,</span><span 
class="pcrr7t-x-x-144"> len</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 512K</span>
<br class="fancyvrb" /><a 
 id="x71-141058r29"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ext_dram</span><span 
class="pcrr7t-x-x-144"> (aw!x):</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xa1080000,</span><span 
class="pcrr7t-x-x-144"> len</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 512K</span>
<br class="fancyvrb" /><a 
 id="x71-141060r30"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> int_cram</span><span 
class="pcrr7t-x-x-144"> (arx):</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xd4000000,</span><span 
class="pcrr7t-x-x-144"> len</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 48K</span>
<br class="fancyvrb" /><a 
 id="x71-141062r31"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> int_dram</span><span 
class="pcrr7t-x-x-144"> (aw!x):</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xd0000000,</span><span 
class="pcrr7t-x-x-144"> len</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 56K</span>
<br class="fancyvrb" /><a 
 id="x71-141064r32"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> pcp_data</span><span 
class="pcrr7t-x-x-144"> (aw!x):</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xf0050000,</span><span 
class="pcrr7t-x-x-144"> len</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 16K</span>
<br class="fancyvrb" /><a 
 id="x71-141066r33"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> pcp_text</span><span 
class="pcrr7t-x-x-144"> (arx):</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0xf0060000,</span><span 
class="pcrr7t-x-x-144"> len</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 32K</span><br class="fancyvrb" /><a 
 id="x71-141068r34"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-141070r35"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span>
<br class="fancyvrb" /><a 
 id="x71-141072r36"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> the</span><span 
class="pcrr7t-x-x-144"> symbol</span><span 
class="pcrr7t-x-x-144"> __TRICORE_DERIVATE_NAME__</span><span 
class="pcrr7t-x-x-144"> will</span><span 
class="pcrr7t-x-x-144"> be</span><span 
class="pcrr7t-x-x-144"> defined</span><span 
class="pcrr7t-x-x-144"> in</span><span 
class="pcrr7t-x-x-144"> the</span><span 
class="pcrr7t-x-x-144"> crt0.S</span><span 
class="pcrr7t-x-x-144"> and</span><span 
class="pcrr7t-x-x-144"> is</span>
<br class="fancyvrb" /><a 
 id="x71-141074r37"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;</span><span 
class="pcrr7t-x-x-144"> tested</span><span 
class="pcrr7t-x-x-144"> here</span><span 
class="pcrr7t-x-x-144"> to</span><span 
class="pcrr7t-x-x-144"> confirm</span><span 
class="pcrr7t-x-x-144"> that</span><span 
class="pcrr7t-x-x-144"> this</span><span 
class="pcrr7t-x-x-144"> memory</span><span 
class="pcrr7t-x-x-144"> map</span><span 
class="pcrr7t-x-x-144"> and</span><span 
class="pcrr7t-x-x-144"> the</span><span 
class="pcrr7t-x-x-144"> startup</span><span 
class="pcrr7t-x-x-144"> file</span><span 
class="pcrr7t-x-x-144"> will</span>
<br class="fancyvrb" /><a 
 id="x71-141076r38"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;</span><span 
class="pcrr7t-x-x-144"> fit</span><span 
class="pcrr7t-x-x-144"> together</span><br class="fancyvrb" /><a 
 id="x71-141078r39"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-141080r40"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _.</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ASSERT</span><span 
class="pcrr7t-x-x-144"> ((__TRICORE_DERIVATE_MEMORY_MAP__</span><span 
class="pcrr7t-x-x-144"> ==</span><span 
class="pcrr7t-x-x-144"> __TRICORE_DERIVATE_NAME__),</span>
<br class="fancyvrb" /><a 
 id="x71-141082r41"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144">     "Using</span><span 
class="pcrr7t-x-x-144"> wrong</span><span 
class="pcrr7t-x-x-144"> Memory</span><span 
class="pcrr7t-x-x-144"> Map.</span><span 
class="pcrr7t-x-x-144"> This</span><span 
class="pcrr7t-x-x-144"> Map</span><span 
class="pcrr7t-x-x-144"> is</span><span 
class="pcrr7t-x-x-144"> for</span><span 
class="pcrr7t-x-x-144"> TC1796");</span></div>
<!--l. 49--><p class="noindent" >The <span 
class="cmtt-12">crt0.o </span>file defines a new Symbol <span class="lstinline"><span 
class="ecss-1200">__TRICORE_DERIVATE_NAME__</span></span>. The value of this
symbol is derived from the derivate name
</p>
<div class="pic-tabular">
<img 
src="main_gcc_ug33x.png" alt=""  /></div>
<!--l. 57--><p class="noindent" >This symbol can be used to check the compability of several object files. Right now it is used to
check the compability of <span 
class="cmtt-12">crt0.o </span>and <span 
class="cmtt-12">memroy.x</span>
</p><!--l. 59--><p class="noindent" ><span 
class="cmssbx-10x-x-120">Linker</span>
<span 
class="cmssbx-10x-x-120">script</span>
</p><!--l. 61--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">MEMORY</span></span> regions are defined by symbols like <span class="lstinline"><span 
class="ecss-1200">__EXT_CODE_RAM_BEGIN</span></span> etc.
(see <span 
class="cmtt-12">elf32tricore.x </span>for detailed description). This definitions can be overidden by
passing a new description in a normal text file to the linker (see <span 
class="cmtt-12">memory.x </span>for an
example)
</p><!--l. 63--><p class="noindent" ><span 
class="cmtt-12">tricore-gcc</span> <span 
class="cmtt-12">-Wl,memory.x </span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">list of objects</span><span 
class="cmmi-12">&#x003E;</span>
</p><!--l. 65--><p class="noindent" ><span 
class="cmssbx-10x-x-120">Sections</span>
</p><!--l. 67--><p class="noindent" >The file <span 
class="cmtt-12">memory.x </span>is passed to linker as additional script. It is not passed as linker description
file (see option <span 
class="cmtt-12">-Wl,T</span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">target.ld</span><span 
class="cmmi-12">&#x003E;</span>.
</p>
                                                                                       
                                                                                       
<div class="center" 
>
<!--l. 69--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox109"><span 
class="cmbx-12">Note:</span><br 
class="newline" />If  a  linker  description  file  <span 
class="cmtt-12">target.ld </span>is  passed  to  the  compiler
driver <span 
class="cmtt-12">tricore-gcc</span> with the option <span 
class="cmtt-12">-Ttarget.ld</span> the memory layout
<span 
class="cmtt-12">memory.x </span>is ignored. With the option <span 
class="cmtt-12">-Wl,-Ttarget.ld</span> the memory
layout of <span 
class="cmtt-12">memory.x </span>is still active, because this file is treated as startup
file. To disable startup files (<span 
class="cmtt-12">crt0.o </span>and <span 
class="cmtt-12">memory.x</span>) use the option
<span 
class="cmtt-12">-nostartfiles</span>.                                                   </div>
</div>
<!--l. 71--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.startup_code</span></span>    </dt><dd 
class="list">
                  <!--l. 72--><p class="noindent" >The  startup  code  from  <span 
class="cmtt-12">crt0.o </span>is  defined  in  an  extra  section
                  <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">startup_code</span></span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.traptab and .inttab</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 73--><p class="noindent" >The traptable and the interrupt tables have now their own sections
                  which will be allocated by default after the startup code.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">.csa</span></span>              </dt><dd 
class="list">
                  <!--l. 74--><p class="noindent" >The  CSA  memory  is  defined  in  an  own  section  to  let  the  linker
                  known  about  the  occupied  memory.  The  size  of  the  CSA  is
                  calculated dynamically from the size of the internal RAM (defined by
                  <span class="lstinline"><span 
class="ecss-1200">__INT_DATA_RAM_SIZE</span></span>) and the sizes of the absolute addressable
                  section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">zdata</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">zbss</span></span>.</p></dd></dl>
<!--l. 77--><p class="noindent" ><span 
class="cmssbx-10x-x-120">Adding</span>
<span 
class="cmssbx-10x-x-120">New</span>
<span 
class="cmssbx-10x-x-120">Sections</span>
</p><!--l. 79--><p class="noindent" >For adding new sections you can edit a new file and save the script e.g. <span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">memory.x</span><span 
class="cmmi-12">&#x003E;</span>. If
this script it is passed the linker your sections are added to the default linker script.
In this manner you can also modify the defaults of the default linker description
file.
</p><!--l. 81--><p class="noindent" >
</p>
                                                                                       
                                                                                       
<div class="fancyvrb" id="fancyvrb216"><a 
 id="x71-141084r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-141086r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> mytext</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-141088r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-141090r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ALIGN(4)</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-141092r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> MySectionBegin</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span><br class="fancyvrb" /><a 
 id="x71-141094r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.mytext)</span><br class="fancyvrb" /><a 
 id="x71-141096r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ALIGN(4)</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-141098r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> MySectionEnd</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span><br class="fancyvrb" /><a 
 id="x71-141100r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> &#x003E;</span><span 
class="pcrr7t-x-x-144"> ext_cram</span><br class="fancyvrb" /><a 
 id="x71-141102r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 149--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.6</span>  <a 
href="#x71-14200020.2.6" id="x71-14200020.2.6">Simple Linker Script Commands</a></h4>
<a 
 id="dx71-142001"></a>
<!--l. 151--><p class="noindent" >In this section we describe the simple linker script commands.
</p><!--l. 153--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.6.1  </span> <a 
href="#x71-14300020.2.6.1" id="x71-14300020.2.6.1">Setting the entry point</a></h5>
<a 
 id="dx71-143001"></a>
<a 
 id="dx71-143002"></a>
<a 
 id="dx71-143003"></a>
<a 
 id="dx71-143004"></a>
<!--l. 156--><p class="noindent" >The first instruction to execute in a program is called the <span 
class="cmsl-12">entry point</span>. You can use the
<span class="lstinline"><span 
class="ecss-1200">ENTRY</span></span> linker script command to set the entry point. The argument is a symbol
name:
</p><!--l. 158--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb217"><a 
 id="x71-143006r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ENTRY(&#x003C;symbol&#x003E;)</span></div>
<!--l. 162--><p class="noindent" >There are several ways to set the entry point. The linker will set the entry point
by trying each of the following methods in order, and stopping when one of them
succeeds:
</p>
      <ul class="itemize1">
      <li class="itemize">the ’-e’ <span 
class="cmmi-12">&#x003C;</span>entry<span 
class="cmmi-12">&#x003E; </span>command-line option;
      </li>
      <li class="itemize">the <span class="lstinline"><span 
class="ecss-1200">ENTRY</span><span 
class="ecss-1200">(&#x003C;</span><span 
class="ecss-1200">symbol</span><span 
class="ecss-1200">&#x003E;)</span></span> command in a linker script;
      </li>
      <li class="itemize">the value of the symbol <span class="lstinline"><span 
class="ecss-1200">start</span></span>, if defined;
                                                                                       
                                                                                       
      </li>
      <li class="itemize">the address of the first byte of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section, if present;
      </li>
      <li class="itemize">The address <span class="lstinline"><span 
class="ecss-1200">0</span></span>.</li></ul>
<!--l. 172--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.6.2  </span> <a 
href="#x71-14400020.2.6.2" id="x71-14400020.2.6.2">Commands dealing with files</a></h5>
<a 
 id="dx71-144001"></a>
<!--l. 174--><p class="noindent" >Several linker script commands deal with files.
</p><!--l. 176--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">INCLUDE &#x003C;filename&#x003E;</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 177--><p class="noindent" ><a 
 id="dx71-144002"></a> <a 
 id="dx71-144003"></a>Include the linker script <span 
class="cmmi-12">&#x003C;</span>filename<span 
class="cmmi-12">&#x003E; </span>at this point. The file will be
                  searched for in the current directory, and in any directory specified
                  with the <span 
class="cmtt-12">-L</span> option. You can nest calls to <span class="lstinline"><span 
class="ecss-1200">INCLUDE</span></span> up to 10 levels
                  deep.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">INPUT(&#x003C;file&#x003E;, &#x003C;file&#x003E;, ...), INPUT(&#x003C;file&#x003E; &#x003C;file&#x003E; ...)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 179--><p class="noindent" ><a 
 id="dx71-144004"></a> <a 
 id="dx71-144005"></a><a 
 id="dx71-144006"></a> <a 
 id="dx71-144007"></a>The <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> command directs the linker to include the named files in
                  the link, as though they were named on the command line.
                  </p><!--l. 183--><p class="noindent" >For example, if you always want to include <span 
class="cmtt-12">subr.o </span>any time you do a
                  link, but you can’t be bothered to put it on every link command line,
                  then you can put <span class="lstinline"><span 
class="ecss-1200">INPUT</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">(</span><span 
class="ecss-1200">subr</span><span 
class="ecss-1200">.</span><span 
class="ecss-1200">o</span><span 
class="ecss-1200">)</span></span> in your linker script.
                  </p><!--l. 185--><p class="noindent" >In fact, if you like, you can list all of your input files in the linker script,
                  and then invoke the linker with nothing but a <span 
class="cmtt-12">-T</span> option.
                  </p><!--l. 187--><p class="noindent" >The linker will first try to open the file in the current directory. If it
                  is not found, the linker will search through the archive library search
                  path. See the description of <span 
class="cmtt-12">-L</span> in (see <a 
href="main_gcc_ugse44.html#x69-13300020.1">Listing 20.1</a>).
                  </p><!--l. 189--><p class="noindent" >If you use <span class="lstinline"><span 
class="ecss-1200">INPUT</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">(</span><span 
class="cmsy-10x-x-120">-</span><span 
class="ecss-1200">l</span><span 
class="ecss-1200">&#x003C;</span><span 
class="ecss-1200">file</span><span 
class="ecss-1200">&#x003E;)</span></span>, <span 
class="cmtt-12">tricore-ld</span> will transform the name to
                  <span 
class="cmtt-12">lib &#x003C;file&#x003E;.a</span>, as with the command line argument <span 
class="cmtt-12">-l</span>.
                  </p><!--l. 191--><p class="noindent" >When you use the <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> command in an implicit linker script, the
                  files will be included in the link at the point at which the linker script
                  file is included. This can affect archive searching.
                  </p></dd><dt class="list">
                                                                                       
                                                                                       
<span class="verb"><span 
class="pcrr8t-">GROUP(&#x003C;file&#x003E;, &#x003C;file&#x003E;, ...), GROUP(&#x003C;file&#x003E; &#x003C;file&#x003E; ...)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 192--><p class="noindent" ><a 
 id="dx71-144008"></a> <a 
 id="dx71-144009"></a>
                  </p><!--l. 194--><p class="noindent" >The  <span class="lstinline"><span 
class="ecss-1200">GROUP</span></span>  command  is  like  <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span>,  except  that  the  named  files
                  should  all  be  archives,  and  they  are  searched  repeatedly  until  no
                  new  undefined  references  are  created.  See  the  description  of  <span 
class="cmtt-12">-(</span> in
                  <a 
href="main_gcc_ugse44.html#x69-13300020.1">Listing 20.1</a>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">OUTPUT(&#x003C;filename&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 195--><p class="noindent" ><a 
 id="dx71-144010"></a><a 
 id="dx71-144011"></a><span class="lstinline"><span 
class="ecss-1200">OUTPUT</span></span> command names the output file. The <span class="lstinline"><span 
class="ecss-1200">OUTPUT</span><span 
class="ecss-1200">(&#x003C;</span><span 
class="ecss-1200">filename</span><span 
class="ecss-1200">&#x003E;)</span></span>
                  entry in the linker script is exactly like using <span 
class="cmtt-12">-o </span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">filename</span><span 
class="cmmi-12">&#x003E;</span> on the
                  command line (see <a 
href="main_gcc_ugse44.html#x69-13300020.1">Listing 20.1</a>). If both are used, the command line
                  option takes precedence.
                  </p><!--l. 198--><p class="noindent" >You can use the <span class="lstinline"><span 
class="ecss-1200">OUTPUT</span></span> command to define a default name for the
                  output file other than the usual default of <span 
class="cmtt-12">a.out</span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">SEARCH_DIR(&#x003C;path&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 199--><p class="noindent" ><a 
 id="dx71-144012"></a><a 
 id="dx71-144013"></a> <a 
 id="dx71-144014"></a><a 
 id="dx71-144015"></a>
                  </p><!--l. 201--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">SEARCH_DIR</span></span> command adds <span 
class="cmmi-12">&#x003C;</span>path<span 
class="cmmi-12">&#x003E; </span>to the list of paths where
                  <span 
class="cmtt-12">tricore-ld</span> looks for archive libraries. Using <span class="lstinline"><span 
class="ecss-1200">SEARCH_DIR</span><span 
class="ecss-1200">(&#x003C;</span><span 
class="ecss-1200">path</span><span 
class="ecss-1200">&#x003E;)</span></span>
                  is   exactly   like   using   <span 
class="cmtt-12">-L </span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">path</span><span 
class="cmmi-12">&#x003E;</span>  on   the   command   line   (see
                  <a 
href="main_gcc_ugse44.html#x69-13300020.1">Listing 20.1</a>). If both are used, then the linker will search both paths.
                  Paths specified using the command line option are searched first.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">STARTUP(&#x003C;filename&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 203--><p class="noindent" ><a 
 id="dx71-144016"></a> <a 
 id="dx71-144017"></a>
                  </p><!--l. 205--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">STARTUP</span></span> command is just like the <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> command, except that
                  <span 
class="cmmi-12">&#x003C;</span>filename<span 
class="cmmi-12">&#x003E; </span>will become the first input file to be linked, as though it
                  were specified first on the command line. This may be useful when
                  using a system in which the entry point is always the start of the first
                  file.</p></dd></dl>
<!--l. 209--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.6.3  </span> <a 
href="#x71-14500020.2.6.3" id="x71-14500020.2.6.3">Commands dealing with object file formats</a></h5>
<!--l. 211--><p class="noindent" >A couple of linker script commands deal with object file formats.
                                                                                       
                                                                                       
</p><!--l. 213--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">OUTPUT_FORMAT(&#x003C;bfdname&#x003E;), OUTPUT_FORMAT(&#x003C;default&#x003E;, &#x003C;big&#x003E;, &#x003C;little&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 214--><p class="noindent" ><a 
 id="dx71-145001"></a> <a 
 id="dx71-145002"></a>The <span class="lstinline"><span 
class="ecss-1200">OUTPUT_FORMAT</span></span> command names the BFD format to use for
                  the output file. Using <span class="lstinline"><span 
class="ecss-1200">OUTPUT_FORMAT</span><span 
class="ecss-1200">(&#x003C;</span><span 
class="ecss-1200">bfdname</span><span 
class="ecss-1200">&#x003E;)</span></span> is exactly like
                  using <span 
class="cmtt-12">--oformat </span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">bfdname</span><span 
class="cmmi-12">&#x003E;</span> on the command line (see <a 
href="main_gcc_ugse44.html#x69-13300020.1">Listing 20.1</a>).
                  If both are used, the command line option takes precedence.
                  </p><!--l. 218--><p class="noindent" >You can use <span class="lstinline"><span 
class="ecss-1200">OUTPUT_FORMAT</span></span> with three arguments to use different
                  formats based on the <span 
class="cmtt-12">-EB</span> and <span 
class="cmtt-12">-EL</span> command line options. This permits
                  the  linker  script  to  set  the  output  format  based  on  the  desired
                  endianness.
                  </p><!--l. 220--><p class="noindent" >If neither <span 
class="cmtt-12">-EB</span> nor <span 
class="cmtt-12">-EL</span> are used, then the output format will be the
                  first argument, <span 
class="cmtt-12">default</span>. If <span 
class="cmtt-12">-EB</span> is used, the output format will be the
                  second argument, <span 
class="cmmi-12">&#x003C;</span>big<span 
class="cmmi-12">&#x003E;</span>. If ’-EL’ is used, the output format will be
                  the third argument, <span 
class="cmmi-12">&#x003C;</span>little<span 
class="cmmi-12">&#x003E;</span>.
                  </p><!--l. 222--><p class="noindent" >For example, the default linker script for the TriCore ELF target uses
                  this
                  </p><!--l. 224--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb218"><a 
 id="x71-145004r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> OUTPUT_FORMAT(elf32-bigmips,</span><span 
class="pcrr7t-x-x-144"> elf32-bigmips,</span><span 
class="pcrr7t-x-x-144"> elf32-littlemips)</span></div>
                  <!--l. 228--><p class="noindent" >This says that the default format for the output file is ’elf32-bigmips’, but if
                  the user uses the <span 
class="cmtt-12">-EL</span> command line option, the output file will be created in
                  the ’elf32-littlemips’ format.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">TARGET(&#x003C;bfdname&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 229--><p class="noindent" ><a 
 id="dx71-145005"></a> <a 
 id="dx71-145006"></a>The <span class="lstinline"><span 
class="ecss-1200">TARGET</span></span> command names the BFD format to use when reading input
                  files. It affects subsequent <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> and <span class="lstinline"><span 
class="ecss-1200">GROUP</span></span> commands. This command is
                  like using <span 
class="cmtt-12">-b </span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">bfdname</span><span 
class="cmmi-12">&#x003E;</span> on the command line (see <a 
href="main_gcc_ugse44.html#x69-13300020.1">Listing 20.1</a>). If the
                  <span class="lstinline"><span 
class="ecss-1200">TARGET</span></span> command is used but <span class="lstinline"><span 
class="ecss-1200">OUTPUT_FORMAT</span></span> is not, then the last
                  <span class="lstinline"><span 
class="ecss-1200">TARGET</span></span> command is also used to set the format for the output
                  file.</p></dd></dl>
<!--l. 233--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.6.4  </span> <a 
href="#x71-14600020.2.6.4" id="x71-14600020.2.6.4">Other linker script commands</a></h5>
<!--l. 235--><p class="noindent" >There are a few other linker scripts commands.
                                                                                       
                                                                                       
</p><!--l. 237--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">ASSERT(&#x003C;exp&#x003E;, &#x003C;message&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 238--><p class="noindent" ><a 
 id="dx71-146001"></a> <a 
 id="dx71-146002"></a>Ensure that <span 
class="cmmi-12">&#x003C;</span>exp<span 
class="cmmi-12">&#x003E; </span>is non-zero. If it is zero, then exit the linker with
                  an error code, and print <span 
class="cmmi-12">&#x003C;</span>message<span 
class="cmmi-12">&#x003E;</span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">EXTERN(&#x003C;symbol&#x003E; &#x003C;symbol&#x003E; ...)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 240--><p class="noindent" ><a 
 id="dx71-146003"></a> <a 
 id="dx71-146004"></a>
                  </p><!--l. 242--><p class="noindent" >Force  <span 
class="cmmi-12">&#x003C;</span>symbol<span 
class="cmmi-12">&#x003E; </span>to  be  entered  in  the  output  file  as  an  undefined
                  symbol.  Doing  this  may,  for  example,  trigger  linking  of  additional
                  modules  from  standard  libraries.  You  may  list  several  <span 
class="cmmi-12">&#x003C;</span>symbol<span 
class="cmmi-12">&#x003E;</span>s
                  for each <span class="lstinline"><span 
class="ecss-1200">EXTERN</span></span>, and you may use <span class="lstinline"><span 
class="ecss-1200">EXTERN</span></span> multiple times. This
                  command has the same effect as the <span 
class="cmtt-12">-u</span> command-line option.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">FORCE_COMMON_ALLOCATION</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 243--><p class="noindent" ><a 
 id="dx71-146005"></a> <a 
 id="dx71-146006"></a>This command has the same effect as the <span 
class="cmtt-12">-d</span> command-line option:
                  to  make  <span 
class="cmtt-12">tricore-ld</span> assign  space  to  common  symbols  even  if  a
                  relocatable output file is specified (<span 
class="cmtt-12">-r</span>).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">INHIBIT_COMMON_ALLOCATION</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 245--><p class="noindent" ><a 
 id="dx71-146007"></a>   <a 
 id="dx71-146008"></a>This    command    has    the    same    effect    as    the    option
                  <span 
class="cmtt-12">--no-define-common</span>: to make <span 
class="cmtt-12">tricore-ld</span> omit the assignment of
                  addresses to common symbols even for a non-relocatable output file.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">NOCROSSREFS(&#x003C;section&#x003E; &#x003C;section&#x003E; ...)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 247--><p class="noindent" ><a 
 id="dx71-146009"></a><a 
 id="dx71-146010"></a> This command may be used to tell <span 
class="cmtt-12">tricore-ld</span> to issue an error about
                  any references among certain output sections.
                  </p><!--l. 249--><p class="noindent" >In certain types of programs, particularly on embedded systems when
                  using overlays, when one section is loaded into memory, another section
                  will not be. Any direct references between the two sections would be
                  errors. For example, it would be an error if code in one section called
                  a function defined in the other section.
                  </p><!--l. 251--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">NOCROSSREFS</span></span> command takes a list of output section names. If
                  <span 
class="cmtt-12">tricore-ld</span> detects any cross references between the sections, it reports an
                  error and returns a non-zero exit status. </p>
                  <div class="center" 
>
                                                                                       
                                                                                       
<!--l. 252--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox110"><span 
class="cmbx-12">Note:</span><br 
class="newline" />The <span class="lstinline"><span 
class="ecss-1200">NOCROSSREFS</span></span> command uses output section names, not input
section names.                                                     </div>
</div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">OUTPUT_ARCH(&#x003C;bfdarch&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 253--><p class="noindent" ><a 
 id="dx71-146011"></a> <a 
 id="dx71-146012"></a><a 
 id="dx71-146013"></a> Specify a particular output machine architecture. The argument is one of
                  the names used by the BFD library. You can see the architecture of an
                  object file by using the <span 
class="cmtt-12">tricore-objdump</span> program with the <span 
class="cmtt-12">-f</span>
                  option.</p></dd></dl>
<!--l. 257--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.7</span>  <a 
href="#x71-14700020.2.7" id="x71-14700020.2.7">Assigning Values to Symbols</a></h4>
<a 
 id="dx71-147001"></a>
<a 
 id="dx71-147002"></a>
<a 
 id="dx71-147003"></a>
<!--l. 259--><p class="noindent" >You may assign a value to a symbol in a linker script. This will define the symbol as a global
symbol.
</p><!--l. 261--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb219"><a 
 id="x71-147005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .sb_code</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-147007r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-147009r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><br class="fancyvrb" /><a 
 id="x71-147011r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> &#x003E;</span><span 
class="pcrr7t-x-x-144"> sb_code</span><br class="fancyvrb" /><a 
 id="x71-147013r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __TEST</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &#x003C;address&#x003E;;</span></div>
<!--l. 269--><p class="noindent" >A global symbol can also be defined with the linker option <span 
class="cmtt-12">-Wl,-defsymb,name=&#x003C;address&#x003E;</span>.
</p><!--l. 272--><p class="noindent" >If the symbol of a call contains an absolute value, then the call instruction is always absolute. If
the address of the symbol is too far away you need the linker option <span 
class="cmtt-12">--relax-24rel</span> or
<span 
class="cmtt-12">--relax</span>.
</p><!--l. 275--><p class="noindent" >The definition of a symbol
</p><!--l. 277--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb220"><a 
 id="x71-147015r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .sb_code</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-147017r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-147019r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><br class="fancyvrb" /><a 
 id="x71-147021r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __TEST</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span><br class="fancyvrb" /><a 
 id="x71-147023r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> &#x003E;</span><span 
class="pcrr7t-x-x-144"> sb_code</span></div>
                                                                                       
                                                                                       
<!--l. 285--><p class="noindent" ><span class="lstinline"><span 
class="ecss-1200">__TEST</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">=</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">.;</span></span> within a section with ”.” puts the symbol relative to the start address of the
output section.
</p><!--l. 287--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.7.1  </span> <a 
href="#x71-14800020.2.7.1" id="x71-14800020.2.7.1">Simple Assignments</a></h5>
<!--l. 289--><p class="noindent" >You may assign to a symbol using any of the C assignment operators:
</p><!--l. 291--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb221"><a 
 id="x71-148002r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-148004r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> +=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-148006r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> -=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-148008r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> &#x22C6;=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-148010r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> /=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-148012r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> &#x003C;&#x003C;=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-148014r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> &#x003E;&#x003E;=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-148016r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> &amp;=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-148018r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;symbol&#x003E;</span><span 
class="pcrr7t-x-x-144"> |=</span><span 
class="pcrr7t-x-x-144"> &#x003C;expression&#x003E;</span><span 
class="pcrr7t-x-x-144"> ;</span></div>
<!--l. 303--><p class="noindent" >The first case will define <span 
class="cmmi-12">&#x003C;</span>symbol<span 
class="cmmi-12">&#x003E; </span>to the value of <span 
class="cmmi-12">&#x003C;</span>expression<span 
class="cmmi-12">&#x003E;</span>. In the other cases, <span 
class="cmmi-12">&#x003C;</span>symbol<span 
class="cmmi-12">&#x003E;</span>
must already be defined, and the value will be adjusted accordingly.
</p><!--l. 305--><p class="noindent" >The special symbol name ’.’ indicates the location counter. You may only use this within a
<span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command.
</p><!--l. 307--><p class="noindent" >The semicolon after <span 
class="cmmi-12">&#x003C;</span>expression<span 
class="cmmi-12">&#x003E; </span>is required.
</p><!--l. 309--><p class="noindent" >Expressions are defined below; see <a 
href="#x71-17300020.2.14">Listing 20.2.14</a>.
</p><!--l. 311--><p class="noindent" >You may write symbol assignments as commands in their own right, or as statements within a
<span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command, or as part of an output section description in a <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span>
command.
</p><!--l. 313--><p class="noindent" >The section of the symbol will be set from the section of the expression; for more information,
see <a 
href="#x71-17300020.2.14">Listing 20.2.14</a>.
</p><!--l. 315--><p class="noindent" >Here is an example showing the three different places that symbol assignments may be
used:
</p><!--l. 317--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb222"><a 
 id="x71-148020r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> floating_point</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0;</span><br class="fancyvrb" /><a 
 id="x71-148022r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-148024r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-148026r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span>
<br class="fancyvrb" /><a 
 id="x71-148028r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-148030r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><br class="fancyvrb" /><a 
 id="x71-148032r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _etext</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span><br class="fancyvrb" /><a 
 id="x71-148034r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-148036r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _bdata</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> (.</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> 3)</span><span 
class="pcrr7t-x-x-144"> &amp;</span><span 
class="pcrr7t-x-x-144"> ~</span><span 
class="pcrr7t-x-x-144"> 3;</span><br class="fancyvrb" /><a 
 id="x71-148038r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-148040r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
                                                                                       
                                                                                       
<!--l. 331--><p class="noindent" >In this example, the symbol <span class="lstinline"><span 
class="ecss-1200">floating_point</span></span> will be defined as zero. The symbol <span class="lstinline"><span 
class="ecss-1200">_etext</span></span> will be
defined as the address following the last <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> input section. The symbol <span class="lstinline"><span 
class="ecss-1200">_bdata</span></span> will be
defined as the address following the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> output section aligned upward to a 4 byte
boundary.
</p><!--l. 333--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.7.2  </span> <a 
href="#x71-14900020.2.7.2" id="x71-14900020.2.7.2">PROVIDE</a></h5>
<a 
 id="dx71-149001"></a>
<!--l. 335--><p class="noindent" >In some cases, it is desirable for a linker script to define a symbol only if it is referenced and is
not defined by any object included in the link. For example, traditional linkers defined
the symbol <span class="lstinline"><span 
class="ecss-1200">etext</span></span>. However, ANSI C requires that the user be able to use <span class="lstinline"><span 
class="ecss-1200">etext</span></span> as a
function name without encountering an error. The <span class="lstinline"><span 
class="ecss-1200">PROVIDE</span></span> keyword may be used to
define a symbol, such as <span class="lstinline"><span 
class="ecss-1200">etext</span></span>, only if it is referenced but not defined. The syntax is
<span class="lstinline"><span 
class="ecss-1200">PROVIDE</span><span 
class="ecss-1200">(&#x003C;</span><span 
class="ecss-1200">symbol</span><span 
class="ecss-1200">&#x003E;</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">=</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">&#x003C;</span><span 
class="ecss-1200">expression</span><span 
class="ecss-1200">&#x003E;)</span></span>.
</p><!--l. 337--><p class="noindent" >Here is an example of using <span class="lstinline"><span 
class="ecss-1200">PROVIDE</span></span> to define <span class="lstinline"><span 
class="ecss-1200">etext</span></span>:
</p><!--l. 339--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb223"><a 
 id="x71-149003r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-149005r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-149007r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-149009r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-149011r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span>
<br class="fancyvrb" /><a 
 id="x71-149013r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _etext</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span><br class="fancyvrb" /><a 
 id="x71-149015r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> PROVIDE(etext</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .);</span><br class="fancyvrb" /><a 
 id="x71-149017r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-149019r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 351--><p class="noindent" >In this example, if the program defines <span class="lstinline"><span 
class="ecss-1200">_etext</span></span> (with a leading underscore), the linker will give a
multiple definition error. If, on the other hand, the program defines <span class="lstinline"><span 
class="ecss-1200">etext</span></span> (with no leading
underscore), the linker will silently use the definition in the program. If the program
references <span class="lstinline"><span 
class="ecss-1200">etext</span></span> but does not define it, the linker will use the definition in the linker
script.
</p><!--l. 353--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.8</span>  <a 
href="#x71-15000020.2.8" id="x71-15000020.2.8">SECTIONS command</a></h4>
<a 
 id="dx71-150001"></a>
<!--l. 355--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command tells the linker how to map input sections into output sections, and
how to place the output sections in memory.
</p><!--l. 357--><p class="noindent" >The format of the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command is:
</p><!--l. 359--><p class="noindent" >
                                                                                       
                                                                                       
</p>
<div class="fancyvrb" id="fancyvrb224"><a 
 id="x71-150003r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-150005r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-150007r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;sections-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-150009r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;sections-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-150011r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-150013r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 368--><p class="noindent" >Each <span 
class="cmmi-12">&#x003C;</span>sections-command<span 
class="cmmi-12">&#x003E; </span>may of be one of the following:
</p>
      <ul class="itemize1">
      <li class="itemize">an <span class="lstinline"><span 
class="ecss-1200">ENTRY</span></span> command (see <a 
href="#x71-14300020.2.6.1">Listing 20.2.6.1</a>)
      </li>
      <li class="itemize">a symbol assignment (see <a 
href="#x71-14700020.2.7">Listing 20.2.7</a>)
      </li>
      <li class="itemize">an output section description
      </li>
      <li class="itemize">an overlay description</li></ul>
<!--l. 377--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">ENTRY</span></span> command and symbol assignments are permitted inside the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command
for convenience in using the location counter in those commands. This can also make the linker
script easier to understand because you can use those commands at meaningful points in the
layout of the output file.
</p><!--l. 379--><p class="noindent" >Output section descriptions and overlay descriptions are described below.
</p><!--l. 381--><p class="noindent" >If you do not use a <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command in your linker script, the linker will place each input
section into an identically named output section in the order that the sections are first
encountered in the input files. If all input sections are present in the first file, for example, the
order of sections in the output file will match the order in the first input file. The first section
will be at address zero.
</p><!--l. 383--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.1  </span> <a 
href="#x71-15100020.2.8.1" id="x71-15100020.2.8.1">Output section description</a></h5>
<!--l. 385--><p class="noindent" >The full description of an output section looks like this:
</p><!--l. 387--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb225"><a 
 id="x71-151002r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;section&#x003E;</span><span 
class="pcrr7t-x-x-144"> [&#x003C;address&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [(&#x003C;type&#x003E;)]</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> [AT(&#x003C;lma&#x003E;)]</span><br class="fancyvrb" /><a 
 id="x71-151004r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span>
<br class="fancyvrb" /><a 
 id="x71-151006r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;output-section-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-151008r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;var{output-section-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-151010r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span>
<br class="fancyvrb" /><a 
 id="x71-151012r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> [&#x003E;&#x003C;region&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [AT&#x003E;&#x003C;lma_region&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [:&#x003C;phdr&#x003E;</span><span 
class="pcrr7t-x-x-144"> :&#x003C;phdr&#x003E;</span><span 
class="pcrr7t-x-x-144"> ...]</span><span 
class="pcrr7t-x-x-144"> [=&#x003C;fillexp&#x003E;]</span></div>
                                                                                       
                                                                                       
<!--l. 396--><p class="noindent" >Most output sections do not use most of the optional section attributes.
</p><!--l. 398--><p class="noindent" >The whitespace around <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E; </span>is required, so that the section name is unambiguous. The
colon and the curly braces are also required. The line breaks and other white space are
optional.
</p><!--l. 400--><p class="noindent" >Each <span 
class="cmmi-12">&#x003C;</span>output-section-command<span 
class="cmmi-12">&#x003E; </span>may be one of the following:
</p>
      <ul class="itemize1">
      <li class="itemize">a symbol assignment (see <a 
href="#x71-14700020.2.7">Listing 20.2.7</a>)
      </li>
      <li class="itemize">an input section description (see <a 
href="#x71-15400020.2.8.4">Listing 20.2.8.4</a>)
      </li>
      <li class="itemize">data values to include directly (see <a 
href="#x71-16000020.2.8.10">Listing 20.2.8.10</a>)
      </li>
      <li class="itemize">a special output section keyword (see <a 
href="#x71-16100020.2.8.11">Listing 20.2.8.11</a>)</li></ul>
<!--l. 409--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.2  </span> <a 
href="#x71-15200020.2.8.2" id="x71-15200020.2.8.2">Output section name</a></h5>
<a 
 id="dx71-152001"></a>
<a 
 id="dx71-152002"></a>
<!--l. 411--><p class="noindent" >The name of the output section is <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E;</span>. <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E; </span>must meet the constraints of your
output format. In formats which only support a limited number of sections, such as <span 
class="cmtt-12">a.out</span>,
the name must be one of the names supported by the format (<span 
class="cmtt-12">a.out</span>, for example,
allows only <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>, <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> or <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span>). If the output format supports any number of sections,
but with numbers and not names (as is the case for Oasys), the name should be
supplied as a quoted numeric string. A section name may consist of any sequence of
characters, but a name which contains any unusual characters such as commas must be
quoted.
</p><!--l. 414--><p class="noindent" >The output section name ’/DISCARD/’ is special. (See also <a 
href="#x71-16200020.2.8.12">Listing 20.2.8.12</a>).
</p><!--l. 416--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.3  </span> <a 
href="#x71-15300020.2.8.3" id="x71-15300020.2.8.3">Output section address</a></h5>
<a 
 id="dx71-153001"></a>
<a 
 id="dx71-153002"></a>
                                                                                       
                                                                                       
<!--l. 418--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E; </span>is an expression for the VMA (the virtual memory address) of the output
section. If you do not provide <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E;</span>, the linker will set it based on <span 
class="cmmi-12">&#x003C;</span>region<span 
class="cmmi-12">&#x003E; </span>if present, or
otherwise based on the current value of the location counter.
</p><!--l. 420--><p class="noindent" >If you provide <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E;</span>, the address of the output section will be set to precisely that. If you
provide neither <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E; </span>nor <span 
class="cmmi-12">&#x003C;</span>region<span 
class="cmmi-12">&#x003E;</span>, then the address of the output section will be set to
the current value of the location counter aligned to the alignment requirements of the output
section. The alignment requirement of the output section is the strictest alignment of any input
section contained within the output section.
</p><!--l. 422--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb226"><a 
 id="x71-153004r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 426--><p class="noindent" >and
</p><!--l. 428--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb227"><a 
 id="x71-153006r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 432--><p class="noindent" >are subtly different. The first will set the address of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> output section to the current value
of the location counter. The second will set it to the current value of the location counter
aligned to the strictest alignment of a <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> input section.
</p><!--l. 434--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E; </span>may be an arbitrary expression; see <a 
href="#x71-17300020.2.14">Listing 20.2.14</a>. For example, if you want
to align the section on a 0x10 byte boundary, so that the lowest four bits of the section address
are zero, you could do something like this:
</p><!--l. 436--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb228"><a 
 id="x71-153008r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> ALIGN(0x10)</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 440--><p class="noindent" >This works because <span class="lstinline"><span 
class="ecss-1200">ALIGN</span></span> returns the current location counter aligned upward to the specified
value.
</p><!--l. 442--><p class="noindent" >Specifying <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E; </span>for a section will change the value of the location counter.
</p><!--l. 444--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.4  </span> <a 
href="#x71-15400020.2.8.4" id="x71-15400020.2.8.4">Input section description</a></h5>
<a 
 id="dx71-154001"></a>
<a 
 id="dx71-154002"></a>
                                                                                       
                                                                                       
<!--l. 446--><p class="noindent" >The most common output section command is an input section description.
</p><!--l. 448--><p class="noindent" >The input section description is the most basic linker script operation. You use output
sections to tell the linker how to lay out your program in memory. You use input
section descriptions to tell the linker how to map the input files into your memory
layout.
</p><!--l. 450--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.5  </span> <a 
href="#x71-15500020.2.8.5" id="x71-15500020.2.8.5">Input section basics</a></h5>
<a 
 id="dx71-155001"></a>
<!--l. 452--><p class="noindent" >An input section description consists of a file name optionally followed by a list of section names
in parentheses.
</p><!--l. 454--><p class="noindent" >The file name and the section name may be wildcard patterns, which we describe further below
(see <a 
href="#x71-15600020.2.8.6">Listing 20.2.8.6</a>).
</p><!--l. 456--><p class="noindent" >The most common input section description is to include all input sections with a particular
name in the output section. For example, to include all input <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> sections, you would
write:
</p><!--l. 458--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb229"><a 
 id="x71-155003r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span></div>
<!--l. 462--><p class="noindent" >Here the <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span></span> is a wildcard which matches any file name. To exclude a list of files from matching
the file name wildcard, <span class="lstinline"><span 
class="ecss-1200">EXCLUDE_FILE</span></span> may be used to match all files except the ones specified
in the <span class="lstinline"><span 
class="ecss-1200">EXCLUDE_FILE</span></span> list. For example:
</p><!--l. 464--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb230"><a 
 id="x71-155005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(EXCLUDE_FILE</span><span 
class="pcrr7t-x-x-144"> (&#x22C6;crtend.o</span><span 
class="pcrr7t-x-x-144"> &#x22C6;otherfile.o)</span><span 
class="pcrr7t-x-x-144"> .ctors)</span></div>
<!--l. 468--><p class="noindent" >will cause all <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">ctors</span></span> sections from all files except <span 
class="cmtt-12">crtend.o </span>and <span 
class="cmtt-12">otherfile.o </span>to be
included.
</p><!--l. 470--><p class="noindent" >There are two ways to include more than one section:
</p><!--l. 472--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb231"><a 
 id="x71-155007r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text</span><span 
class="pcrr7t-x-x-144"> .rdata)</span><br class="fancyvrb" /><a 
 id="x71-155009r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.rdata)</span></div>
                                                                                       
                                                                                       
<!--l. 477--><p class="noindent" >The difference between these is the order in which the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">rdata</span></span> input sections will appear
in the output section. In the first example, they will be intermingled, appearing in the same
order as they are found in the linker input. In the second example, all <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> input sections will
appear first, followed by all <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">rdata</span></span> input sections.
</p><!--l. 479--><p class="noindent" >You can specify a file name to include sections from a particular file. You would do this if one or
more of your files contain special data that needs to be at a particular location in memory. For
example:
</p><!--l. 481--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb232"><a 
 id="x71-155011r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> data.o(.data)</span></div>
<!--l. 485--><p class="noindent" >If you use a file name without a list of sections, then all sections in the input file will be
included in the output section. This is not commonly done, but it may by useful on occasion.
For example:
</p><!--l. 487--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb233"><a 
 id="x71-155013r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> data.o</span></div>
<!--l. 491--><p class="noindent" >When you use a file name which does not contain any wild card characters, the linker will first
see if you also specified the file name on the linker command line or in an <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> command. If
you did not, the linker will attempt to open the file as an input file, as though it appeared on
the command line. Note that this differs from an <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> command, because the linker will not
search for the file in the archive search path.
</p><!--l. 493--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.6  </span> <a 
href="#x71-15600020.2.8.6" id="x71-15600020.2.8.6">Input section wildcard patterns</a></h5>
<a 
 id="dx71-156001"></a>
<a 
 id="dx71-156002"></a>
<a 
 id="dx71-156003"></a>
<a 
 id="dx71-156004"></a>
<!--l. 496--><p class="noindent" >In an input section description, either the file name or the section name or both may be
wildcard patterns.
</p><!--l. 498--><p class="noindent" >The file name of ’*’ seen in many examples is a simple wildcard pattern for the file
name.
</p><!--l. 500--><p class="noindent" >The wildcard patterns are:
</p><!--l. 502--><p class="noindent" >
                                                                                       
                                                                                       
                  </p><dl class="list1"><dt class="list">
<span 
class="cmtt-12">’*’</span>               </dt><dd 
class="list">
                  <!--l. 503--><p class="noindent" >matches any number of characters
                  </p></dd><dt class="list">
<span 
class="cmtt-12">’?’</span>               </dt><dd 
class="list">
                  <!--l. 504--><p class="noindent" >matches any single character
                  </p></dd><dt class="list">
<span 
class="cmtt-12">[</span><span 
class="cmmi-12">&#x003C;</span><span 
class="cmtt-12">chars</span><span 
class="cmmi-12">&#x003E;</span><span 
class="cmtt-12">]</span>       </dt><dd 
class="list">
                  <!--l. 505--><p class="noindent" >matches a single instance of any of the <span 
class="cmmi-12">&#x003C;</span>chars<span 
class="cmmi-12">&#x003E;</span>; the ’-’ character may
                  be used to specify a range of characters, as in ’[a-z]’ to match any lower
                  case letter
                  </p></dd><dt class="list">
<span 
class="cmsy-10x-x-120">\</span>                 </dt><dd 
class="list">
                  <!--l. 506--><p class="noindent" >quotes the following character</p></dd></dl>
<!--l. 509--><p class="noindent" >When a file name is matched with a wildcard, the wildcard characters will not match a
’/’ character (used to separate directory names on Unix). A pattern consisting of a
single ’*’ character is an exception; it will always match any file name, whether it
contains a ’/’ or not. In a section name, the wildcard characters will match a ’/’
character.
</p><!--l. 511--><p class="noindent" >File name wildcard patterns only match files which are explicitly specified on the
command line or in an <span class="lstinline"><span 
class="ecss-1200">INPUT</span></span> command. The linker does not search directories to expand
wildcards.
</p><!--l. 513--><p class="noindent" >If a file name matches more than one wildcard pattern, or if a file name appears explicitly and
is also matched by a wildcard pattern, the linker will use the first match in the linker script. For
example, this sequence of input section descriptions is probably in error, because the <span 
class="cmtt-12">data.o</span>
rule will not be used:
</p><!--l. 515--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb234"><a 
 id="x71-156006r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-156008r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data1</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> data.o(.data)</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<a 
 id="dx71-156009"></a>
<!--l. 521--><p class="noindent" >Normally, the linker will place files and sections matched by wildcards in the order in which
they are seen during the link. You can change this by using the <span class="lstinline"><span 
class="ecss-1200">SORT</span></span> keyword, which appears
before a wildcard pattern in parentheses (e.g., <span class="lstinline"><span 
class="ecss-1200">SORT</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">text</span><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">)</span></span>). When the <span class="lstinline"><span 
class="ecss-1200">SORT</span></span> keyword is used,
the linker will sort the files or sections into ascending order by name before placing them in the
output file.
</p><!--l. 524--><p class="noindent" >If you ever get confused about where input sections are going, use the <span 
class="cmtt-12">-M</span> linker option to
generate a map file. The map file shows precisely how input sections are mapped to output
sections.
                                                                                       
                                                                                       
</p><!--l. 526--><p class="noindent" >This example shows how wildcard patterns might be used to partition files. This
linker script directs the linker to place all <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> sections in <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> and all <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> sections in
<span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span>. The linker will place the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> section from all files beginning with an upper
case character in <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">DATA</span></span>; for all other files, the linker will place the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> section in
<span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span>.
</p><!--l. 528--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb235"><a 
 id="x71-156011r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-156013r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-156015r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .DATA</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> [A-Z]&#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-156017r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-156019r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .bss</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.bss)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-156021r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 537--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.7  </span> <a 
href="#x71-15700020.2.8.7" id="x71-15700020.2.8.7">Input section for common symbols</a></h5>
<a 
 id="dx71-157001"></a>
<a 
 id="dx71-157002"></a>
<!--l. 539--><p class="noindent" >A special notation is needed for common symbols, because in many object file formats common
symbols do not have a particular input section. The linker treats common symbols as though
they are in an input section named <span class="lstinline"><span 
class="ecss-1200">COMMON</span></span>.
</p><!--l. 541--><p class="noindent" >You may use file names with the <span class="lstinline"><span 
class="ecss-1200">COMMON</span></span> section just as with any other input sections. You
can use this to place common symbols from a particular input file in one section while common
symbols from other input files are placed in another section.
</p><!--l. 543--><p class="noindent" >In most cases, common symbols in input files will be placed in the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> section in the output file.
For example:
</p><!--l. 545--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb236"><a 
 id="x71-157004r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .bss</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.bss)</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(COMMON)</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<a 
 id="dx71-157005"></a>
<a 
 id="dx71-157006"></a>
<!--l. 551--><p class="noindent" >Some object file formats have more than one type of common symbol. For example, the MIPS
ELF object file format distinguishes standard common symbols and small common symbols. In
this case, the linker will use a different special section name for other types of common symbols.
In the case of MIPS ELF, the linker uses <span class="lstinline"><span 
class="ecss-1200">COMMON</span></span> for standard common symbols and
<span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">scommon</span></span> for small common symbols. This permits you to map the different types of common
symbols into memory at different locations.
<a 
 id="dx71-157007"></a>
</p><!--l. 554--><p class="noindent" >You will sometimes see <span class="lstinline"><span 
class="ecss-1200">[</span><span 
class="ecss-1200">COMMON</span><span 
class="ecss-1200">]</span></span> in old linker scripts. This notation is now considered
obsolete. It is equivalent to <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(</span><span 
class="ecss-1200">COMMON</span><span 
class="ecss-1200">)</span></span>.
                                                                                       
                                                                                       
</p><!--l. 556--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.8  </span> <a 
href="#x71-15800020.2.8.8" id="x71-15800020.2.8.8">Input section and garbage collection</a></h5>
<a 
 id="dx71-158001"></a>
<a 
 id="dx71-158002"></a>
<!--l. 558--><p class="noindent" >When link-time garbage collection is in use (<span 
class="cmtt-12">--gc-sections</span>), it is often useful to mark sections
that should not be eliminated. This is accomplished by surrounding an input section’s wildcard
entry with <span class="lstinline"><span 
class="ecss-1200">KEEP</span><span 
class="ecss-1200">()</span></span>, as in <span class="lstinline"><span 
class="ecss-1200">KEEP</span><span 
class="ecss-1200">(</span><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">init</span><span 
class="ecss-1200">))</span></span> or <span class="lstinline"><span 
class="ecss-1200">KEEP</span><span 
class="ecss-1200">(</span><span 
class="ecss-1200">SORT</span><span 
class="ecss-1200">(</span><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">)(.</span><span 
class="ecss-1200">ctors</span><span 
class="ecss-1200">))</span></span>.
</p><!--l. 560--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.9  </span> <a 
href="#x71-15900020.2.8.9" id="x71-15900020.2.8.9">Input section example</a></h5>
<!--l. 562--><p class="noindent" >The following example is a complete linker script. It tells the linker to read all of the sections
from file <span 
class="cmtt-12">all.o </span>and place them at the start of output section ’outputa’ which starts at location
’0x10000’. All of section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">input1</span></span> from file <span 
class="cmtt-12">foo.o </span>follows immediately, in the same output section.
All of section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">input2</span></span> from <span 
class="cmtt-12">foo.o </span>goes into output section ’outputb’, followed by section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">input1</span></span>
from <span 
class="cmtt-12">foo1.o</span>. All of the remaining <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">input1</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">input2</span></span> sections from any files are written to
output section ’outputc’.
</p><!--l. 565--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb237"><a 
 id="x71-159002r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-159004r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> outputa</span><span 
class="pcrr7t-x-x-144"> 0x10000</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-159006r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-159008r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> all.o</span>
<br class="fancyvrb" /><a 
 id="x71-159010r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> foo.o</span><span 
class="pcrr7t-x-x-144"> (.input1)</span><br class="fancyvrb" /><a 
 id="x71-159012r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-159014r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> outputb</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-159016r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span>
<br class="fancyvrb" /><a 
 id="x71-159018r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> foo.o</span><span 
class="pcrr7t-x-x-144"> (.input2)</span><br class="fancyvrb" /><a 
 id="x71-159020r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> foo1.o</span><span 
class="pcrr7t-x-x-144"> (.input1)</span><br class="fancyvrb" /><a 
 id="x71-159022r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-159024r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> outputc</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-159026r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-159028r14"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.input1)</span><br class="fancyvrb" /><a 
 id="x71-159030r15"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.input2)</span><br class="fancyvrb" /><a 
 id="x71-159032r16"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-159034r17"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 585--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.10  </span> <a 
href="#x71-16000020.2.8.10" id="x71-16000020.2.8.10">Output section data</a></h5>
<a 
 id="dx71-160001"></a>
<a 
 id="dx71-160002"></a>
<a 
 id="dx71-160003"></a>
<a 
 id="dx71-160004"></a>
<a 
 id="dx71-160005"></a>
<a 
 id="dx71-160006"></a>
                                                                                       
                                                                                       
<a 
 id="dx71-160007"></a>
<a 
 id="dx71-160008"></a>
<!--l. 590--><p class="noindent" >You can include explicit bytes of data in an output section by using <span class="lstinline"><span 
class="ecss-1200">BYTE</span></span>, <span class="lstinline"><span 
class="ecss-1200">SHORT</span></span>, <span class="lstinline"><span 
class="ecss-1200">LONG</span></span>,
<span class="lstinline"><span 
class="ecss-1200">QUAD</span></span>, or <span class="lstinline"><span 
class="ecss-1200">SQUAD</span></span> as an output section command. Each keyword is followed by an expression in
parentheses providing the value to store (<a 
href="#x71-17300020.2.14">Listing 20.2.14</a>). The value of the expression is stored
at the current value of the location counter.
</p><!--l. 593--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">BYTE</span></span>, <span class="lstinline"><span 
class="ecss-1200">SHORT</span></span>, <span class="lstinline"><span 
class="ecss-1200">LONG</span></span>, and <span class="lstinline"><span 
class="ecss-1200">QUAD</span></span> commands store one, two, four, and eight bytes
(respectively). After storing the bytes, the location counter is incremented by the number of
bytes stored.
</p><!--l. 595--><p class="noindent" >For example, this will store the byte 1 followed by the four byte value of the symbol
’addr’:
</p><!--l. 597--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb238"><a 
 id="x71-160010r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> BYTE(1)</span><br class="fancyvrb" /><a 
 id="x71-160012r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> LONG(addr)</span></div>
<!--l. 602--><p class="noindent" >When using a 64 bit host or target, <span class="lstinline"><span 
class="ecss-1200">QUAD</span></span> and <span class="lstinline"><span 
class="ecss-1200">SQUAD</span></span> are the same; they both store an 8 byte,
or 64 bit, value. When both host and target are 32 bits, an expression is computed as 32 bits. In
this case <span class="lstinline"><span 
class="ecss-1200">QUAD</span></span> stores a 32 bit value zero extended to 64 bits, and <span class="lstinline"><span 
class="ecss-1200">SQUAD</span></span> stores a 32 bit value
sign extended to 64 bits.
</p><!--l. 604--><p class="noindent" >If the object file format of the output file has an explicit endianness, which is the normal case,
the value will be stored in that endianness. When the object file format does not have an
explicit endianness, as is true of, for example, S-records, the value will be stored in the
endianness of the first input object file. </p>
<div class="center" 
>
<!--l. 605--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox111"><span 
class="cmbx-12">Note:</span><br 
class="newline" />These  commands  only  work  inside  a  section  description  and  not
between them, so the following will produce an error from the linker:</div>
</div>
<!--l. 607--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb239"><a 
 id="x71-160014r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> LONG(1)</span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 611--><p class="noindent" >whereas this will work:
</p><!--l. 613--><p class="noindent" >
                                                                                       
                                                                                       
</p>
<div class="fancyvrb" id="fancyvrb240"><a 
 id="x71-160016r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> LONG(1)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<a 
 id="dx71-160017"></a>
<a 
 id="dx71-160018"></a>
<a 
 id="dx71-160019"></a>
<!--l. 621--><p class="noindent" >You may use the <span class="lstinline"><span 
class="ecss-1200">FILL</span></span> command to set the fill pattern for the current section. It is followed by
an expression in parentheses. Any otherwise unspecified regions of memory within the section
(for example, gaps left due to the required alignment of input sections) are filled with the value
of the expression, repeated as necessary. A <span class="lstinline"><span 
class="ecss-1200">FILL</span></span> statement covers memory locations after
the point at which it occurs in the section definition; by including more than one
<span class="lstinline"><span 
class="ecss-1200">FILL</span></span> statement, you can have different fill patterns in different parts of an output
section.
</p><!--l. 623--><p class="noindent" >This example shows how to fill unspecified regions of memory with the value ’0x90’:
</p><!--l. 625--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb241"><a 
 id="x71-160021r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> FILL(0x90909090)</span></div>
<!--l. 629--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">FILL</span></span> command is similar to the ’=<span 
class="cmmi-12">&#x003C;</span>fillexp<span 
class="cmmi-12">&#x003E;</span>’ output section attribute, but it only affects
the part of the section following the <span class="lstinline"><span 
class="ecss-1200">FILL</span></span> command, rather than the entire section. If both are
used, the <span class="lstinline"><span 
class="ecss-1200">FILL</span></span> command takes precedence. (see <a 
href="#x71-16800020.2.9.5">Listing 20.2.9.5</a>, for details on the fill
expression.
</p><!--l. 632--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.11  </span> <a 
href="#x71-16100020.2.8.11" id="x71-16100020.2.8.11">Output section keywords</a></h5>
<!--l. 634--><p class="noindent" >There are a couple of keywords which can appear as output section commands.
<a 
 id="dx71-161001"></a>
<a 
 id="dx71-161002"></a>
<a 
 id="dx71-161003"></a>
</p><!--l. 640--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">CREATE_OBJECT_SYMBOLS</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 641--><p class="noindent" >The command tells the linker to create a symbol for each input file.
                  The name of each symbol will be the name of the corresponding input
                  file. The section of each symbol will be the output section in which the
                  <span class="lstinline"><span 
class="ecss-1200">CREATE_OBJECT_SYMBOLS</span></span> command appears.
                  </p><!--l. 644--><p class="noindent" >This is conventional for the a.out object file format. It is not normally
                                                                                       
                                                                                       
                  used for any other object file format.
<a 
 id="dx71-161004"></a>
<a 
 id="dx71-161005"></a>
<a 
 id="dx71-161006"></a>
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">CONSTRUCTORS</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 648--><p class="noindent" >When  linking  using  the  a.out  object  file  format,  the  linker  uses
                  an  unusual  set  construct  to  support  C++  global  constructors  and
                  destructors. When linking object file formats which do not support
                  arbitrary  sections,  such  as  ECOFF  and  XCOFF,  the  linker  will
                  automatically  recognize  C++  global  constructors  and  destructors
                  by  name.  For  these  object  file  formats,  the  <span class="lstinline"><span 
class="ecss-1200">CONSTRUCTORS</span></span>
                  command  tells  the  linker  to  place  constructor  information  in  the
                  output section where the <span class="lstinline"><span 
class="ecss-1200">CONSTRUCTORS</span></span> command appears. The
                  <span class="lstinline"><span 
class="ecss-1200">CONSTRUCTORS</span></span> command is ignored for other object file formats.
                  </p><!--l. 650--><p class="noindent" >The  symbol  <span class="lstinline"><span 
class="ecss-1200">__CTOR_LIST__</span></span>  marks  the  start  of  the  global
                  constructors, and the symbol <span class="lstinline"><span 
class="ecss-1200">__DTOR_LIST</span></span> marks the end. The first
                  word in the list is the number of entries, followed by the address of each
                  constructor or destructor, followed by a zero word. The compiler must
                  arrange to actually run the code. For these object file formats <span 
class="cmsl-12">GNU</span>
                  C++ normally calls constructors from a subroutine <span class="lstinline"><span 
class="ecss-1200">__main</span></span>; a call to
                  <span class="lstinline"><span 
class="ecss-1200">__main</span></span> is automatically inserted into the startup code for <span class="lstinline"><span 
class="ecss-1200">main</span></span>. <span 
class="cmsl-12">GNU</span>
                  C++ normally runs destructors either by using <span class="lstinline"><span 
class="ecss-1200">atexit</span></span>, or directly from
                  the function <span class="lstinline"><span 
class="ecss-1200">exit</span></span>.
                  </p><!--l. 652--><p class="noindent" >For object file formats such as <span class="lstinline"><span 
class="ecss-1200">COFF</span></span> or <span class="lstinline"><span 
class="ecss-1200">ELF</span></span> which support arbitrary
                  section names, <span 
class="cmsl-12">GNU </span>C++ will normally arrange to put the addresses
                  of global constructors and destructors into the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">ctors</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">dtors</span></span> sections.
                  Placing the following sequence into your linker script will build the
                  sort of table which the <span 
class="cmsl-12">GNU </span>C++ runtime code expects to see.
                  </p><!--l. 654--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb242"><a 
 id="x71-161008r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __CTOR_LIST__</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span>
                  <br class="fancyvrb" /><a 
 id="x71-161010r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> LONG((__CTOR_END__</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> __CTOR_LIST__)</span><span 
class="pcrr7t-x-x-144"> /</span><span 
class="pcrr7t-x-x-144"> 4</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> 2)</span>
                  <br class="fancyvrb" /><a 
 id="x71-161012r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.ctors)</span><br class="fancyvrb" /><a 
 id="x71-161014r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> LONG(0)</span>
                  <br class="fancyvrb" /><a 
 id="x71-161016r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __CTOR_END__</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span><br class="fancyvrb" /><a 
 id="x71-161018r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __DTOR_LIST__</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span>
                  <br class="fancyvrb" /><a 
 id="x71-161020r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> LONG((__DTOR_END__</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> __DTOR_LIST__)</span><span 
class="pcrr7t-x-x-144"> /</span><span 
class="pcrr7t-x-x-144"> 4</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> 2)</span>
                  <br class="fancyvrb" /><a 
 id="x71-161022r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.dtors)</span><br class="fancyvrb" /><a 
 id="x71-161024r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> LONG(0)</span><br class="fancyvrb" /><a 
 id="x71-161026r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __DTOR_END__</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .;</span></div>
                  <!--l. 667--><p class="noindent" >If you are using the <span 
class="cmsl-12">GNU </span>C++ support for initialization priority, which
                  provides some control over the order in which global constructors are run,
                  you must sort the constructors at link time to ensure that they are executed
                                                                                       
                                                                                       
                  in the correct order. When using the <span class="lstinline"><span 
class="ecss-1200">CONSTRUCTORS</span></span> command, use
                  <span class="lstinline"><span 
class="ecss-1200">SORT</span><span 
class="ecss-1200">(</span><span 
class="ecss-1200">CONSTRUCTORS</span><span 
class="ecss-1200">)</span></span> instead. When using the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">ctors</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">dtors</span></span> sections,
                  use <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(</span><span 
class="ecss-1200">SORT</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">ctors</span><span 
class="ecss-1200">))</span></span> and <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(</span><span 
class="ecss-1200">SORT</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">dtors</span><span 
class="ecss-1200">))</span></span> instead of just <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">ctors</span><span 
class="ecss-1200">)</span></span> and
                  <span class="lstinline"><span 
class="cmsy-10x-x-120">*</span><span 
class="ecss-1200">(.</span><span 
class="ecss-1200">dtors</span><span 
class="ecss-1200">)</span></span>.
                  </p><!--l. 669--><p class="noindent" >Normally the compiler and linker will handle these issues automatically, and
                  you will not need to concern yourself with them. However, you may need to
                  consider this if you are using C++ and writing your own linker
                  scripts.</p></dd></dl>
<!--l. 673--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.8.12  </span> <a 
href="#x71-16200020.2.8.12" id="x71-16200020.2.8.12">Output section discarding</a></h5>
<a 
 id="dx71-162001"></a>
<a 
 id="dx71-162002"></a>
<a 
 id="dx71-162003"></a>
<!--l. 679--><p class="noindent" >The linker will not create output sections which do not have any contents. This is for
convenience when referring to input sections that may or may not be present in any of the input
files. For example:
</p><!--l. 681--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb243"><a 
 id="x71-162005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .foo</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.foo)</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 685--><p class="noindent" >will only create a <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">foo</span></span> section in the output file if there is a <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">foo</span></span> section in at least one input
file.
</p><!--l. 687--><p class="noindent" >If you use anything other than an input section description as an output section command, such
as a symbol assignment, then the output section will always be created, even if there are no
matching input sections.
<a 
 id="dx71-162006"></a>
</p><!--l. 690--><p class="noindent" >The special output section name <span class="lstinline"><span 
class="ecss-1200">/</span><span 
class="ecss-1200">DISCARD</span><span 
class="ecss-1200">/</span></span> may be used to discard input sections. Any input
sections which are assigned to an output section named <span class="lstinline"><span 
class="ecss-1200">/</span><span 
class="ecss-1200">DISCARD</span><span 
class="ecss-1200">/</span></span> are not included in the
output file.
</p><!--l. 692--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.9</span>  <a 
href="#x71-16300020.2.9" id="x71-16300020.2.9">Output section attributes</a></h4>
<a 
 id="dx71-163001"></a>
                                                                                       
                                                                                       
<!--l. 695--><p class="noindent" >We showed above that the full description of an output section looked like this:
</p><!--l. 697--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb244"><a 
 id="x71-163003r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;section&#x003E;</span><span 
class="pcrr7t-x-x-144"> [&#x003C;address&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [(&#x003C;type&#x003E;)]</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> [AT(&#x003C;lma&#x003E;)]</span><br class="fancyvrb" /><a 
 id="x71-163005r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span>
<br class="fancyvrb" /><a 
 id="x71-163007r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;var{output-section-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-163009r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;output-section-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-163011r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span>
<br class="fancyvrb" /><a 
 id="x71-163013r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> [&#x003E;&#x003C;region&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [AT&#x003E;&#x003C;lma_region&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [:&#x003C;phdr&#x003E;</span><span 
class="pcrr7t-x-x-144"> :&#x003C;phdr&#x003E;</span><span 
class="pcrr7t-x-x-144"> ...]</span><span 
class="pcrr7t-x-x-144"> [=&#x003C;fillexp&#x003E;]</span></div>
<!--l. 706--><p class="noindent" >We’ve already described <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E;</span>, <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E;</span>, and <span 
class="cmmi-12">&#x003C;</span>output-section-command<span 
class="cmmi-12">&#x003E;</span>. In this
section we will describe the remaining section attributes.
</p><!--l. 708--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.9.1  </span> <a 
href="#x71-16400020.2.9.1" id="x71-16400020.2.9.1">Output section type</a></h5>
<!--l. 710--><p class="noindent" >Each output section may have a type. The type is a keyword in parentheses. The following
types are defined:
</p><!--l. 712--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">NOLOAD</span></span>            </dt><dd 
class="list">
                  <!--l. 713--><p class="noindent" >The section should be marked as not loadable, so that it will not be
                  loaded into memory when the program is run.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">DSECT, COPY, INFO, OVERLAY</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 714--><p class="noindent" >These type names are supported for backward compatibility, and are
                  rarely used. They all have the same effect: the section should be marked
                  as not allocatable, so that no memory is allocated for the section when
                  the program is run.</p></dd></dl>
<a 
 id="dx71-164001"></a>
<a 
 id="dx71-164002"></a>
<a 
 id="dx71-164003"></a>
<!--l. 719--><p class="noindent" >The linker normally sets the attributes of an output section based on the input sections which
map into it. You can override this by using the section type. For example, in the script sample
below, the ’ROM’ section is addressed at memory location ’0’ and does not need to be loaded
when the program is run. The contents of the ’ROM’ section will appear in the linker output file
as usual.
</p><!--l. 721--><p class="noindent" >
</p>
                                                                                       
                                                                                       
<div class="fancyvrb" id="fancyvrb245"><a 
 id="x71-164005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-164007r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ROM</span><span 
class="pcrr7t-x-x-144"> 0</span><span 
class="pcrr7t-x-x-144"> (NOLOAD)</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> ...</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-164009r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-164011r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 728--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.9.2  </span> <a 
href="#x71-16500020.2.9.2" id="x71-16500020.2.9.2">Output section LMA</a></h5>
<a 
 id="dx71-165001"></a>
<a 
 id="dx71-165002"></a>
<a 
 id="dx71-165003"></a>
<a 
 id="dx71-165004"></a>
<!--l. 734--><p class="noindent" >Every section has a virtual address (VMA) and a load address (LMA); see <a 
href="#x71-13800020.2.2">Listing 20.2.2</a>. The
address expression which may appear in an output section description sets the VMA (see
<a 
href="#x71-15300020.2.8.3">Listing 20.2.8.3</a>).
</p><!--l. 736--><p class="noindent" >The linker will normally set the LMA equal to the VMA. You can change that by using the <span class="lstinline"><span 
class="ecss-1200">AT</span></span>
keyword. The expression <span 
class="cmmi-12">&#x003C;</span>lma<span 
class="cmmi-12">&#x003E; </span>that follows the <span class="lstinline"><span 
class="ecss-1200">AT</span></span> keyword specifies the load address of the
section. Alternatively, with <span class="lstinline"><span 
class="ecss-1200">AT</span><span 
class="ecss-1200">&#x003C;</span><span 
class="ecss-1200">lma_region</span><span 
class="ecss-1200">&#x003E;</span></span> expression, you may specify a memory region for
the section’s load address.
<a 
 id="dx71-165005"></a>
<a 
 id="dx71-165006"></a>
</p><!--l. 741--><p class="noindent" >This feature is designed to make it easy to build a ROM image. For example, the following
linker script creates three output sections: one called <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>, which starts at <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x1000</span></span>, one called
<span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">mdata</span></span>, which is loaded at the end of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section even though its VMA is <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x2000</span></span>, and one
called <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">bss</span></span> to hold uninitialized data at address <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x3000</span></span>. The symbol <span class="lstinline"><span 
class="ecss-1200">_data</span></span> is defined with the
value <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x2000</span></span>, which shows that the location counter holds the VMA value, not the LMA
value.
</p><!--l. 743--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb246"><a 
 id="x71-165008r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-165010r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-165012r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> 0x1000</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> _etext</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-165014r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .mdata</span><span 
class="pcrr7t-x-x-144"> 0x2000</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-165016r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> AT</span><span 
class="pcrr7t-x-x-144"> (</span><span 
class="pcrr7t-x-x-144"> ADDR</span><span 
class="pcrr7t-x-x-144"> (.text)</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> SIZEOF</span><span 
class="pcrr7t-x-x-144"> (.text)</span><span 
class="pcrr7t-x-x-144"> )</span>
<br class="fancyvrb" /><a 
 id="x71-165018r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> _data</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data);</span><span 
class="pcrr7t-x-x-144"> _edata</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-165020r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .bss</span><span 
class="pcrr7t-x-x-144"> 0x3000</span><span 
class="pcrr7t-x-x-144"> :</span>
<br class="fancyvrb" /><a 
 id="x71-165022r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> _bstart</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.bss)</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(COMMON)</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> _bend</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;}</span><br class="fancyvrb" /><a 
 id="x71-165024r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 755--><p class="noindent" >The run-time initialization code for use with a program generated with this linker script would
include something like the following, to copy the initialized data from the ROM image to its
runtime address. Notice how this code takes advantage of the symbols defined by the linker
script.
</p><!--l. 757--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb247"><a 
 id="x71-165026r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> extern</span><span 
class="pcrr7t-x-x-144"> char</span><span 
class="pcrr7t-x-x-144"> _etext,</span><span 
class="pcrr7t-x-x-144"> _data,</span><span 
class="pcrr7t-x-x-144"> _edata,</span><span 
class="pcrr7t-x-x-144"> _bstart,</span><span 
class="pcrr7t-x-x-144"> _bend;</span>
                                                                                       
                                                                                       
<br class="fancyvrb" /><a 
 id="x71-165028r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> char</span><span 
class="pcrr7t-x-x-144"> &#x22C6;src</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &amp;_etext;</span><br class="fancyvrb" /><a 
 id="x71-165030r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> char</span><span 
class="pcrr7t-x-x-144"> &#x22C6;dst</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &amp;_data;</span><br class="fancyvrb" /><a 
 id="x71-165032r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span>
<br class="fancyvrb" /><a 
 id="x71-165034r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> %/&#x22C6;</span><span 
class="pcrr7t-x-x-144"> ROM</span><span 
class="pcrr7t-x-x-144"> has</span><span 
class="pcrr7t-x-x-144"> data</span><span 
class="pcrr7t-x-x-144"> at</span><span 
class="pcrr7t-x-x-144"> end</span><span 
class="pcrr7t-x-x-144"> of</span><span 
class="pcrr7t-x-x-144"> text;</span><span 
class="pcrr7t-x-x-144"> copy</span><span 
class="pcrr7t-x-x-144"> it.</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-165036r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> while</span><span 
class="pcrr7t-x-x-144"> (dst</span><span 
class="pcrr7t-x-x-144"> &#x003C;</span><span 
class="pcrr7t-x-x-144"> &amp;_edata)</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-165038r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;dst++</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &#x22C6;src++;</span><br class="fancyvrb" /><a 
 id="x71-165040r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-165042r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><br class="fancyvrb" /><a 
 id="x71-165044r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> %/&#x22C6;</span><span 
class="pcrr7t-x-x-144"> Zero</span><span 
class="pcrr7t-x-x-144"> bss</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-165046r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> for</span><span 
class="pcrr7t-x-x-144"> (dst</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &amp;_bstart;</span><span 
class="pcrr7t-x-x-144"> dst&#x003C;</span><span 
class="pcrr7t-x-x-144"> &amp;_bend;</span><span 
class="pcrr7t-x-x-144"> dst++)</span><br class="fancyvrb" /><a 
 id="x71-165048r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;dst</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0;</span></div>
<!--l. 772--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.9.3  </span> <a 
href="#x71-16600020.2.9.3" id="x71-16600020.2.9.3">Output section region</a></h5>
<a 
 id="dx71-166001"></a>
<a 
 id="dx71-166002"></a>
<a 
 id="dx71-166003"></a>
<!--l. 776--><p class="noindent" >You can assign a section to a previously defined region of memory by using <span class="lstinline"><span 
class="ecss-1200">&#x003E;&#x003C;</span><span 
class="ecss-1200">region</span><span 
class="ecss-1200">&#x003E;</span></span>. (see
<a 
href="#x71-17000020.2.11">Listing 20.2.11</a>).
</p><!--l. 778--><p class="noindent" >Here is a simple example:
</p><!--l. 780--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb248"><a 
 id="x71-166005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> MEMORY</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> rom</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> ORIGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x1000,</span><span 
class="pcrr7t-x-x-144"> LENGTH</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x1000</span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-166007r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> ROM</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> &#x003E;rom</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 785--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.9.4  </span> <a 
href="#x71-16700020.2.9.4" id="x71-16700020.2.9.4">Output section phdr</a></h5>
<a 
 id="dx71-167001"></a>
<a 
 id="dx71-167002"></a>
<a 
 id="dx71-167003"></a>
<!--l. 790--><p class="noindent" >You can assign a section to a previously defined program segment by using <span class="lstinline"><span 
class="ecss-1200">:&#x003C;</span><span 
class="ecss-1200">phdr</span><span 
class="ecss-1200">&#x003E;</span></span>. If a
section is assigned to one or more segments, then all subsequent allocated sections
will be assigned to those segments as well, unless they use an explicitly <span class="lstinline"><span 
class="ecss-1200">:&#x003C;</span><span 
class="ecss-1200">phdr</span><span 
class="ecss-1200">&#x003E;</span></span>
modifier. You can use <span class="lstinline"><span 
class="ecss-1200">:</span><span 
class="ecss-1200">NONE</span></span> to tell the linker to not put the section in any segment at
all.
</p><!--l. 792--><p class="noindent" >Here is a simple example:
</p><!--l. 794--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb249"><a 
 id="x71-167005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> PHDRS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> text</span><span 
class="pcrr7t-x-x-144"> PT_LOAD</span><span 
class="pcrr7t-x-x-144"> ;</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-167007r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> :text</span><span 
class="pcrr7t-x-x-144"> }</span></div>
                                                                                       
                                                                                       
<!--l. 799--><p class="noindent" >
</p>
<h5 class="subsubsectionHead"><span class="titlemark">20.2.9.5  </span> <a 
href="#x71-16800020.2.9.5" id="x71-16800020.2.9.5">Output section fill</a></h5>
<a 
 id="dx71-168001"></a>
<a 
 id="dx71-168002"></a>
<a 
 id="dx71-168003"></a>
<!--l. 804--><p class="noindent" >You can set the fill pattern for an entire section by using <span class="lstinline"><span 
class="ecss-1200">=&#x003C;</span><span 
class="ecss-1200">fillexp</span><span 
class="ecss-1200">&#x003E;</span></span>. <span 
class="cmmi-12">&#x003C;</span>fillexp<span 
class="cmmi-12">&#x003E; </span>is an expression.
Any otherwise unspecified regions of memory within the output section (for example, gaps left
due to the required alignment of input sections) will be filled with the value, repeated as
necessary. If the fill expression is a simple hex number, ie. a string of hex digit starting with <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x</span></span>
and without a trailing <span class="lstinline"><span 
class="ecss-1200">k</span></span> or <span class="lstinline"><span 
class="ecss-1200">M</span></span>, then an arbitrarily long sequence of hex digits can
be used to specify the fill pattern; Leading zeros become part of the pattern too.
For all other cases, including extra parentheses or a unary <span class="lstinline"><span 
class="ecss-1200">+</span></span>, the fill pattern is the
four least significant bytes of the value of the expression. In all cases, the number is
big-endian.
</p><!--l. 808--><p class="noindent" >You can also change the fill value with a <span class="lstinline"><span 
class="ecss-1200">FILL</span></span> command in the output section commands; (see
<a 
href="#x71-16000020.2.8.10">Listing 20.2.8.10</a>).
</p><!--l. 810--><p class="noindent" >Here is a simple example:
</p><!--l. 812--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb250"><a 
 id="x71-168005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> =0x90909090</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 816--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.10</span>  <a 
href="#x71-16900020.2.10" id="x71-16900020.2.10">Overlay description</a></h4>
<a 
 id="dx71-169001"></a>
<a 
 id="dx71-169002"></a>
<!--l. 819--><p class="noindent" >An overlay description provides an easy way to describe sections which are to be loaded as part
of a single memory image but are to be run at the same memory address. At run time, some
sort of overlay manager will copy the overlaid sections in and out of the runtime
memory address as required, perhaps by simply manipulating addressing bits. This
approach can be useful, for example, when a certain region of memory is faster than
another.
</p><!--l. 821--><p class="noindent" >Overlays are described using the <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span> command. The <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span> command is used within
a <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command, like an output section description. The full syntax of the <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span>
                                                                                       
                                                                                       
command is as follows:
</p><!--l. 823--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb251"><a 
 id="x71-169004r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> OVERLAY</span><span 
class="pcrr7t-x-x-144"> [&#x003C;start&#x003E;]</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> [NOCROSSREFS]</span><span 
class="pcrr7t-x-x-144"> [AT</span><span 
class="pcrr7t-x-x-144"> (</span><span 
class="pcrr7t-x-x-144"> &#x003C;ldaddr&#x003E;</span><span 
class="pcrr7t-x-x-144"> )]</span><br class="fancyvrb" /><a 
 id="x71-169006r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span>
<br class="fancyvrb" /><a 
 id="x71-169008r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;secname1&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-169010r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-169012r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;output-section-command&#x003E;</span>
<br class="fancyvrb" /><a 
 id="x71-169014r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;output-section-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-169016r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span>
<br class="fancyvrb" /><a 
 id="x71-169018r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> [:&#x003C;phdr&#x003E;...]</span><span 
class="pcrr7t-x-x-144"> [=&#x003C;fill&#x003E;]</span><br class="fancyvrb" /><a 
 id="x71-169020r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;secname2&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-169022r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span>
<br class="fancyvrb" /><a 
 id="x71-169024r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;output-section-command&#x003E;</span><br class="fancyvrb" /><a 
 id="x71-169026r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;output-section-command&#x003E;</span>
<br class="fancyvrb" /><a 
 id="x71-169028r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-169030r14"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> [:&#x003C;phdr&#x003E;...]</span><span 
class="pcrr7t-x-x-144"> [=&#x003C;fill&#x003E;]</span><br class="fancyvrb" /><a 
 id="x71-169032r15"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span>
<br class="fancyvrb" /><a 
 id="x71-169034r16"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> [&#x003E;&#x003C;region&#x003E;]</span><span 
class="pcrr7t-x-x-144"> [:&#x003C;phdr&#x003E;...]</span><span 
class="pcrr7t-x-x-144"> [=&#x003C;fill&#x003E;]</span></div>
<!--l. 842--><p class="noindent" >Everything is optional except <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span> (a keyword), and each section must have a name
(<span 
class="cmmi-12">&#x003C;</span>secname1<span 
class="cmmi-12">&#x003E; </span>and <span 
class="cmmi-12">&#x003C;</span>secname2<span 
class="cmmi-12">&#x003E; </span>above). The section definitions within the <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span>
construct are identical to those within the general <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> construct (<a 
href="#x71-15000020.2.8">Listing 20.2.8</a>),
except that no addresses and no memory regions may be defined for sections within an
<span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span>.
</p><!--l. 844--><p class="noindent" >The sections are all defined with the same starting address. The load addresses of the sections
are arranged such that they are consecutive in memory starting at the load address used for the
<span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span> as a whole (as with normal section definitions, the load address is optional, and
defaults to the start address; the start address is also optional, and defaults to the current value
of the location counter).
</p><!--l. 846--><p class="noindent" >If the <span class="lstinline"><span 
class="ecss-1200">NOCROSSREFS</span></span> keyword is used, and there are any references among the sections, the
linker will report an error. Since the sections all run at the same address, it normally does not
make sense for one section to refer directly to another. (see <a 
href="#x71-14600020.2.6.4">Listing 20.2.6.4</a>.
</p><!--l. 848--><p class="noindent" >For each section within the <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span>, the linker automatically defines two symbols. The
symbol <span class="lstinline"><span 
class="ecss-1200">__load_start_</span><span 
class="ecss-1200">&#x003C;</span><span 
class="ecss-1200">secname</span><span 
class="ecss-1200">&#x003E;</span></span> is defined as the starting load address of the section. The
symbol <span class="lstinline"><span 
class="ecss-1200">__load_stop_</span><span 
class="ecss-1200">&#x003C;</span><span 
class="ecss-1200">secname</span><span 
class="ecss-1200">&#x003E;</span></span> is defined as the final load address of the section. Any
characters within <span 
class="cmmi-12">&#x003C;</span>secname<span 
class="cmmi-12">&#x003E; </span>which are not legal within C identifiers are removed. C
(or assembler) code may use these symbols to move the overlaid sections around as
necessary.
</p><!--l. 850--><p class="noindent" >At the end of the overlay, the value of the location counter is set to the start address of the
overlay plus the size of the largest section.
</p><!--l. 852--><p class="noindent" >Here is an example. Remember that this would appear inside a <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> construct.
</p><!--l. 854--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb252"><a 
 id="x71-169036r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> OVERLAY</span><span 
class="pcrr7t-x-x-144"> 0x1000</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> AT</span><span 
class="pcrr7t-x-x-144"> (0x4000)</span><br class="fancyvrb" /><a 
 id="x71-169038r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-169040r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text0</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> o1/&#x22C6;.o(.text)</span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-169042r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text1</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> o2/&#x22C6;.o(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-169044r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 862--><p class="noindent" >This will define both <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text0</span></span> and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text1</span></span> to start at address 0x1000. <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text0</span></span> will be loaded at
                                                                                       
                                                                                       
address 0x4000, and <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text1</span></span> will be loaded immediately after <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text0</span></span>. The following
symbols will be defined: <span class="lstinline"><span 
class="ecss-1200">__load_start_text0</span></span>, <span class="lstinline"><span 
class="ecss-1200">__load_stop_text0</span></span>, <span class="lstinline"><span 
class="ecss-1200">__load_start_text1</span></span>,
<span class="lstinline"><span 
class="ecss-1200">__load_stop_text1</span></span>.
</p><!--l. 864--><p class="noindent" >C code to copy overlay <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text1</span></span> into the overlay area might look like the following.
</p><!--l. 866--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb253"><a 
 id="x71-169046r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> extern</span><span 
class="pcrr7t-x-x-144"> char</span><span 
class="pcrr7t-x-x-144"> __load_start_text1,</span><span 
class="pcrr7t-x-x-144"> __load_stop_text1;</span>
<br class="fancyvrb" /><a 
 id="x71-169048r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> memcpy</span><span 
class="pcrr7t-x-x-144"> ((char</span><span 
class="pcrr7t-x-x-144"> &#x22C6;)</span><span 
class="pcrr7t-x-x-144"> 0x1000,</span><span 
class="pcrr7t-x-x-144"> &amp;__load_start_text1,</span>
<br class="fancyvrb" /><a 
 id="x71-169050r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &amp;__load_stop_text1</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> &amp;__load_start_text1);</span></div>
<div class="center" 
>
<!--l. 872--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox112"><span 
class="cmbx-12">Note:</span><br 
class="newline" />The <span class="lstinline"><span 
class="ecss-1200">OVERLAY</span></span> command is just syntactic sugar, since everything it
does can be done using the more basic commands. The above example
could have been written identically as follows.                      </div>
</div>
<!--l. 874--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb254"><a 
 id="x71-169052r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text0</span><span 
class="pcrr7t-x-x-144"> 0x1000</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> AT</span><span 
class="pcrr7t-x-x-144"> (0x4000)</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> o1/&#x22C6;.o(.text)</span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-169054r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __load_start_text0</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> LOADADDR</span><span 
class="pcrr7t-x-x-144"> (.text0);</span>
<br class="fancyvrb" /><a 
 id="x71-169056r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __load_stop_text0</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> LOADADDR</span><span 
class="pcrr7t-x-x-144"> (.text0)</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> SIZEOF</span><span 
class="pcrr7t-x-x-144"> (.text0);</span>
<br class="fancyvrb" /><a 
 id="x71-169058r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text1</span><span 
class="pcrr7t-x-x-144"> 0x1000</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> AT</span><span 
class="pcrr7t-x-x-144"> (0x4000</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> SIZEOF</span><span 
class="pcrr7t-x-x-144"> (.text0))</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> o2/&#x22C6;.o(.text)</span><span 
class="pcrr7t-x-x-144"> }</span>
<br class="fancyvrb" /><a 
 id="x71-169060r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __load_start_text1</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> LOADADDR</span><span 
class="pcrr7t-x-x-144"> (.text1);</span>
<br class="fancyvrb" /><a 
 id="x71-169062r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __load_stop_text1</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> LOADADDR</span><span 
class="pcrr7t-x-x-144"> (.text1)</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> SIZEOF</span><span 
class="pcrr7t-x-x-144"> (.text1);</span>
<br class="fancyvrb" /><a 
 id="x71-169064r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x1000</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> MAX</span><span 
class="pcrr7t-x-x-144"> (SIZEOF</span><span 
class="pcrr7t-x-x-144"> (.text0),</span><span 
class="pcrr7t-x-x-144"> SIZEOF</span><span 
class="pcrr7t-x-x-144"> (.text1));</span></div>
<!--l. 884--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.11</span>  <a 
href="#x71-17000020.2.11" id="x71-17000020.2.11">MEMORY command</a></h4>
<a 
 id="dx71-170001"></a>
                                                                                       
                                                                                       
<a 
 id="dx71-170002"></a>
<a 
 id="dx71-170003"></a>
<a 
 id="dx71-170004"></a>
<!--l. 890--><p class="noindent" >The linker’s default configuration permits allocation of all available memory. You can override
this by using the <span class="lstinline"><span 
class="ecss-1200">MEMORY</span></span> command.
</p><!--l. 892--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">MEMORY</span></span> command describes the location and size of blocks of memory in the target. You
can use it to describe which memory regions may be used by the linker, and which memory
regions it must avoid. You can then assign sections to particular memory regions. The linker
will set section addresses based on the memory regions, and will warn about regions that
become too full. The linker will not shuffle sections around to fit into the available
regions.
</p><!--l. 894--><p class="noindent" >A linker script may contain at most one use of the <span class="lstinline"><span 
class="ecss-1200">MEMORY</span></span> command. However, you can
define as many blocks of memory within it as you wish. The syntax is:
</p><!--l. 896--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb255"><a 
 id="x71-170006r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> MEMORY</span><br class="fancyvrb" /><a 
 id="x71-170008r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-170010r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;name&#x003E;</span><span 
class="pcrr7t-x-x-144"> [(&#x003C;attr&#x003E;)]</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> ORIGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &#x003C;origin&#x003E;,</span><span 
class="pcrr7t-x-x-144"> LENGTH</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> &#x003C;len&#x003E;</span>
<br class="fancyvrb" /><a 
 id="x71-170012r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-170014r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 904--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>name<span 
class="cmmi-12">&#x003E; </span>is a name used in the linker script to refer to the region. The region name has no
meaning outside of the linker script. Region names are stored in a separate name space, and will
not conflict with symbol names, file names, or section names. Each memory region must have a
distinct name.
<a 
 id="dx71-170015"></a>
</p><!--l. 907--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>attr<span 
class="cmmi-12">&#x003E; </span>string is an optional list of attributes that specify whether to use a particular
memory region for an input section which is not explicitly mapped in the linker script. As
described in <a 
href="#x71-15000020.2.8">Listing 20.2.8</a>, if you do not specify an output section for some input section, the
linker will create an output section with the same name as the input section. If you define
region attributes, the linker will use them to select the memory region for the output section
that it creates.
</p><!--l. 909--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>attr<span 
class="cmmi-12">&#x003E; </span>string must consist only of the following characters:
      </p><dl class="description"><dt class="description">
<span 
class="cmssbx-10x-x-120">R</span> </dt><dd 
class="description">Read-only section.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">W</span> </dt><dd 
class="description">Read/write section.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">X</span> </dt><dd 
class="description">Executable section.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">A</span> </dt><dd 
class="description">Allocatable section.
                                                                                       
                                                                                       
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">I</span> </dt><dd 
class="description">Initialized section.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">L</span> </dt><dd 
class="description">Same as <span 
class="cmtt-12">I</span>.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">P</span> </dt><dd 
class="description">Section contains PCP code or data.
      </dd><dt class="description">
<span 
class="cmssbx-10x-x-120">!</span> </dt><dd 
class="description">Invert the sense of any of the preceding attributes.</dd></dl>
<!--l. 922--><p class="noindent" >If a unmapped section matches any of the listed attributes other than <span class="lstinline"><span 
class="ecss-1200">!</span></span>, it will be
placed in the memory region. The <span class="lstinline"><span 
class="ecss-1200">!</span></span> attribute reverses this test, so that an unmapped
section will be placed in the memory region only if it does not match any of the listed
attributes.
<a 
 id="dx71-170016"></a>
<a 
 id="dx71-170017"></a>
<a 
 id="dx71-170018"></a>
</p><!--l. 928--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>origin<span 
class="cmmi-12">&#x003E; </span>is an expression for the start address of the memory region. The expression must
evaluate to a constant before memory allocation is performed, which means that you may not
use any section relative symbols. The keyword <span class="lstinline"><span 
class="ecss-1200">ORIGIN</span></span> may be abbreviated to <span class="lstinline"><span 
class="ecss-1200">org</span></span> or <span class="lstinline"><span 
class="ecss-1200">o</span></span> (but not,
for example, <span class="lstinline"><span 
class="ecss-1200">ORG</span></span>).
<a 
 id="dx71-170019"></a>
<a 
 id="dx71-170020"></a>
<a 
 id="dx71-170021"></a>
</p><!--l. 933--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>len<span 
class="cmmi-12">&#x003E; </span>is an expression for the size in bytes of the memory region. As with the <span 
class="cmmi-12">&#x003C;</span>origin<span 
class="cmmi-12">&#x003E;</span>
expression, the expression must evaluate to a constant before memory allocation is performed.
The keyword <span class="lstinline"><span 
class="ecss-1200">LENGTH</span></span> may be abbreviated to <span class="lstinline"><span 
class="ecss-1200">len</span></span> or <span class="lstinline"><span 
class="ecss-1200">l</span></span>.
</p><!--l. 935--><p class="noindent" >In the following example, we specify that there are two memory regions available for allocation:
one starting at ’0’ for 256 kilobytes, and the other starting at ’0x40000000’ for four megabytes.
The linker will place into the ’rom’ memory region every section which is not explicitly mapped
into a memory region, and is either read-only or executable. The linker will place other
sections which are not explicitly mapped into a memory region into the ’ram’ memory
region.
</p><!--l. 937--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb256"><a 
 id="x71-170023r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> MEMORY</span><br class="fancyvrb" /><a 
 id="x71-170025r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-170027r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> rom</span><span 
class="pcrr7t-x-x-144"> (rx)</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> ORIGIN</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0,</span><span 
class="pcrr7t-x-x-144"> LENGTH</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 256K</span>
<br class="fancyvrb" /><a 
 id="x71-170029r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ram</span><span 
class="pcrr7t-x-x-144"> (!rx)</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> org</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x40000000,</span><span 
class="pcrr7t-x-x-144"> l</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 4M</span><br class="fancyvrb" /><a 
 id="x71-170031r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 945--><p class="noindent" >Once you define a memory region, you can direct the linker to place specific output sections into
that memory region by using the ’<span 
class="cmmi-12">&#x003E;</span>region’ output section attribute. For example, if you have a
memory region named ’mem’, you would use ’<span 
class="cmmi-12">&#x003E;</span>mem’ in the output section definition. (see
<a 
href="#x71-16600020.2.9.3">Listing 20.2.9.3</a>). If no address was specified for the output section, the linker will set the
address to the next available address within the memory region. If the combined output sections
                                                                                       
                                                                                       
directed to a memory region are too large for the region, the linker will issue an error
message.
</p><!--l. 947--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.12</span>  <a 
href="#x71-17100020.2.12" id="x71-17100020.2.12">PHDRS Command</a></h4>
<a 
 id="dx71-171001"></a>
<a 
 id="dx71-171002"></a>
<a 
 id="dx71-171003"></a>
<a 
 id="dx71-171004"></a>
<a 
 id="dx71-171005"></a>
<!--l. 954--><p class="noindent" >The ELF object file format uses <span 
class="cmsl-12">program headers</span>, also known as <span 
class="cmsl-12">segments</span>. The program
headers describe how the program should be loaded into memory. You can print them out by
using the <span 
class="cmtt-12">tricore-objdump</span> program with the <span 
class="cmtt-12">-p</span> option.
</p><!--l. 956--><p class="noindent" >When you run an ELF program on a native ELF system, the system loader reads the program
headers in order to figure out how to load the program. This will only work if the
program headers are set correctly. This manual does not describe the details of how
the system loader interprets program headers; for more information, see the ELF
ABI.
</p><!--l. 958--><p class="noindent" >The linker will create reasonable program headers by default. However, in some cases, you may
need to specify the program headers more precisely. You may use the <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> command for this
purpose. When the linker sees the <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> command in the linker script, it will not create any
program headers other than the ones specified.
</p><!--l. 960--><p class="noindent" >The linker only pays attention to the <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> command when generating an ELF output file. In
other cases, the linker will simply ignore <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span>.
</p><!--l. 962--><p class="noindent" >This is the syntax of the <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> command. The words <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span>, <span class="lstinline"><span 
class="ecss-1200">FILEHDR</span></span>, <span class="lstinline"><span 
class="ecss-1200">AT</span></span>, and <span class="lstinline"><span 
class="ecss-1200">FLAGS</span></span> are
keywords.
</p><!--l. 964--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb257"><a 
 id="x71-171007r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> PHDRS</span><br class="fancyvrb" /><a 
 id="x71-171009r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-171011r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x003C;name&#x003E;</span><span 
class="pcrr7t-x-x-144"> &#x003C;type&#x003E;</span><span 
class="pcrr7t-x-x-144"> [</span><span 
class="pcrr7t-x-x-144"> FILEHDR</span><span 
class="pcrr7t-x-x-144"> ]</span><span 
class="pcrr7t-x-x-144"> [</span><span 
class="pcrr7t-x-x-144"> PHDRS</span><span 
class="pcrr7t-x-x-144"> ]</span><span 
class="pcrr7t-x-x-144"> [</span><span 
class="pcrr7t-x-x-144"> AT</span><span 
class="pcrr7t-x-x-144"> (</span><span 
class="pcrr7t-x-x-144"> &#x003C;address&#x003E;</span><span 
class="pcrr7t-x-x-144"> )</span><span 
class="pcrr7t-x-x-144"> ]</span>
<br class="fancyvrb" /><a 
 id="x71-171013r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> [</span><span 
class="pcrr7t-x-x-144"> FLAGS</span><span 
class="pcrr7t-x-x-144"> (</span><span 
class="pcrr7t-x-x-144"> &#x003C;flags&#x003E;</span><span 
class="pcrr7t-x-x-144"> )</span><span 
class="pcrr7t-x-x-144"> ]</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-171015r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 972--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>name<span 
class="cmmi-12">&#x003E; </span>is used only for reference in the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command of the linker script. It is not
put into the output file. Program header names are stored in a separate name space, and will
not conflict with symbol names, file names, or section names. Each program header must have a
distinct name.
</p><!--l. 974--><p class="noindent" >Certain program header types describe segments of memory which the system loader will load
from the file. In the linker script, you specify the contents of these segments by placing
                                                                                       
                                                                                       
allocatable output sections in the segments. You use the ’:<span 
class="cmmi-12">&#x003C;</span>phdr<span 
class="cmmi-12">&#x003E;</span>’ output section attribute to
place a section in a particular segment. See <a 
href="#x71-16700020.2.9.4">Listing 20.2.9.4</a>.
</p><!--l. 976--><p class="noindent" >It is normal to put certain sections in more than one segment. This merely implies that one
segment of memory contains another. You may repeat ’:<span 
class="cmmi-12">&#x003C;</span>phdr<span 
class="cmmi-12">&#x003E;</span>’, using it once for each segment
which should contain the section.
</p><!--l. 978--><p class="noindent" >If you place a section in one or more segments using ’:<span 
class="cmmi-12">&#x003C;</span>phdr<span 
class="cmmi-12">&#x003E;</span>’, then the linker will place all
subsequent allocatable sections which do not specify ’:<span 
class="cmmi-12">&#x003C;</span>phdr<span 
class="cmmi-12">&#x003E;</span>’ in the same segments. This is
for convenience, since generally a whole set of contiguous sections will be placed in a single
segment. You can use <span class="lstinline"><span 
class="ecss-1200">:</span><span 
class="ecss-1200">NONE</span></span> to override the default segment and tell the linker to not put the
section in any segment at all.
<a 
 id="dx71-171016"></a>
<a 
 id="dx71-171017"></a>
</p><!--l. 982--><p class="noindent" >You may use the <span class="lstinline"><span 
class="ecss-1200">FILEHDR</span></span> and <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> keywords appear after the program header type to
further describe the contents of the segment. The <span class="lstinline"><span 
class="ecss-1200">FILEHDR</span></span> keyword means that the segment
should include the ELF file header. The <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> keyword means that the segment should
include the ELF program headers themselves.
</p><!--l. 985--><p class="noindent" >The <span 
class="cmmi-12">&#x003C;</span>type<span 
class="cmmi-12">&#x003E; </span>may be one of the following. The numbers indicate the value of the
keyword.
</p><!--l. 987--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">PT_NULL (0)</span></span>      </dt><dd 
class="list">
                  <!--l. 988--><p class="noindent" >Indicates an unused program header.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">PT_LOAD (1)</span></span>      </dt><dd 
class="list">
                  <!--l. 989--><p class="noindent" >Indicates that this program header describes a segment to be loaded
                  from the file.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">PT_DYNAMIC (2)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 990--><p class="noindent" >Indicates a segment where dynamic linking information can be found.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">PT_INTERP (3)</span></span>    </dt><dd 
class="list">
                  <!--l. 991--><p class="noindent" >Indicates a segment where the name of the program interpreter may
                  be found.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">PT_NOTE (4)</span></span>      </dt><dd 
class="list">
                  <!--l. 992--><p class="noindent" >Indicates a segment holding note information.
                  </p></dd><dt class="list">
                                                                                       
                                                                                       
<span class="verb"><span 
class="pcrr8t-">PT_SHLIB (5)</span></span>     </dt><dd 
class="list">
                  <!--l. 993--><p class="noindent" >A reserved program header type, defined but not specified by the ELF
                  ABI.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">PT_PHDR (6)</span></span>      </dt><dd 
class="list">
                  <!--l. 994--><p class="noindent" >Indicates a segment where the program headers may be found.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">&#x003C;expression&#x003E;</span></span>     </dt><dd 
class="list">
                  <!--l. 995--><p class="noindent" >An expression giving the numeric type of the program header. This
                  may be used for types not defined above.</p></dd></dl>
<!--l. 998--><p class="noindent" >You can specify that a segment should be loaded at a particular address in memory by using an
<span class="lstinline"><span 
class="ecss-1200">AT</span></span> expression. This is identical to the <span class="lstinline"><span 
class="ecss-1200">AT</span></span> command used as an output section attribute (see
<a 
href="#x71-16500020.2.9.2">Listing 20.2.9.2</a>). The <span class="lstinline"><span 
class="ecss-1200">AT</span></span> command for a program header overrides the output section
attribute.
</p><!--l. 1000--><p class="noindent" >The linker will normally set the segment flags based on the sections which comprise the
segment. You may use the <span class="lstinline"><span 
class="ecss-1200">FLAGS</span></span> keyword to explicitly specify the segment flags. The
value of <span 
class="cmmi-12">&#x003C;</span>flags<span 
class="cmmi-12">&#x003E; </span>must be an integer. It is used to set the <span class="lstinline"><span 
class="ecss-1200">p_flags</span></span> field of the program
header.
</p><!--l. 1002--><p class="noindent" >Here is an example of <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span>. This shows a typical set of program headers used on a native
ELF system.
</p><!--l. 1004--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb258"><a 
 id="x71-171019r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> PHDRS</span><br class="fancyvrb" /><a 
 id="x71-171021r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-171023r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> headers</span><span 
class="pcrr7t-x-x-144"> PT_PHDR</span><span 
class="pcrr7t-x-x-144"> PHDRS</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-171025r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> interp</span><span 
class="pcrr7t-x-x-144"> PT_INTERP</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-171027r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> text</span><span 
class="pcrr7t-x-x-144"> PT_LOAD</span><span 
class="pcrr7t-x-x-144"> FILEHDR</span><span 
class="pcrr7t-x-x-144"> PHDRS</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-171029r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> data</span><span 
class="pcrr7t-x-x-144"> PT_LOAD</span><span 
class="pcrr7t-x-x-144"> ;</span>
<br class="fancyvrb" /><a 
 id="x71-171031r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> dynamic</span><span 
class="pcrr7t-x-x-144"> PT_DYNAMIC</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-171033r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-171035r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><br class="fancyvrb" /><a 
 id="x71-171037r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-171039r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-171041r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> SIZEOF_HEADERS;</span>
<br class="fancyvrb" /><a 
 id="x71-171043r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .interp</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.interp)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> :text</span><span 
class="pcrr7t-x-x-144"> :interp</span><br class="fancyvrb" /><a 
 id="x71-171045r14"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> :text</span>
<br class="fancyvrb" /><a 
 id="x71-171047r15"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .rodata</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.rodata)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> defaults</span><span 
class="pcrr7t-x-x-144"> to</span><span 
class="pcrr7t-x-x-144"> :text</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span><br class="fancyvrb" /><a 
 id="x71-171049r16"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span>
<br class="fancyvrb" /><a 
 id="x71-171051r17"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> 0x1000;</span><span 
class="pcrr7t-x-x-144"> /&#x22C6;</span><span 
class="pcrr7t-x-x-144"> move</span><span 
class="pcrr7t-x-x-144"> to</span><span 
class="pcrr7t-x-x-144"> a</span><span 
class="pcrr7t-x-x-144"> new</span><span 
class="pcrr7t-x-x-144"> page</span><span 
class="pcrr7t-x-x-144"> in</span><span 
class="pcrr7t-x-x-144"> memory</span><span 
class="pcrr7t-x-x-144"> &#x22C6;/</span>
<br class="fancyvrb" /><a 
 id="x71-171053r18"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> :data</span><br class="fancyvrb" /><a 
 id="x71-171055r19"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .dynamic</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.dynamic)</span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> :data</span><span 
class="pcrr7t-x-x-144"> :dynamic</span>
<br class="fancyvrb" /><a 
 id="x71-171057r20"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-171059r21"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1028--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.13</span>  <a 
href="#x71-17200020.2.13" id="x71-17200020.2.13">VERSION Command</a></h4>
<a 
 id="dx71-172001"></a>
                                                                                       
                                                                                       
<a 
 id="dx71-172002"></a>
<a 
 id="dx71-172003"></a>
<a 
 id="dx71-172004"></a>
<!--l. 1033--><p class="noindent" >The linker supports symbol versions when using ELF. Symbol versions are only useful when
using shared libraries. The dynamic linker can use symbol versions to select a specific version of
a function when it runs a program that may have been linked against an earlier version of the
shared library.
</p><!--l. 1035--><p class="noindent" >You can include a version script directly in the main linker script, or you can supply the version
script as an implicit linker script. You can also use the <span 
class="cmtt-12">--version-script</span> linker
option.
</p><!--l. 1037--><p class="noindent" >The syntax of the <span class="lstinline"><span 
class="ecss-1200">VERSION</span></span> command is simply
</p><!--l. 1039--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb259"><a 
 id="x71-172006r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> VERSION</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> version-script-commands</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1043--><p class="noindent" >The format of the version script commands is identical to that used by Sun’s linker in Solaris
2.5. The version script defines a tree of version nodes. You specify the node names and
interdependencies in the version script. You can specify which symbols are bound to which
version nodes, and you can reduce a specified set of symbols to local scope so that they are not
globally visible outside of the shared library.
</p><!--l. 1045--><p class="noindent" >The easiest way to demonstrate the version script language is with a few examples.
</p><!--l. 1047--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb260"><a 
 id="x71-172008r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> VERS_1.1</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-172010r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> global:</span><br class="fancyvrb" /><a 
 id="x71-172012r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> foo1;</span><br class="fancyvrb" /><a 
 id="x71-172014r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> local:</span><br class="fancyvrb" /><a 
 id="x71-172016r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> old&#x22C6;;</span>
<br class="fancyvrb" /><a 
 id="x71-172018r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> original&#x22C6;;</span><br class="fancyvrb" /><a 
 id="x71-172020r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> new&#x22C6;;</span><br class="fancyvrb" /><a 
 id="x71-172022r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> };</span><br class="fancyvrb" /><a 
 id="x71-172024r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><br class="fancyvrb" /><a 
 id="x71-172026r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> VERS_1.2</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-172028r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> foo2;</span>
<br class="fancyvrb" /><a 
 id="x71-172030r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> VERS_1.1;</span><br class="fancyvrb" /><a 
 id="x71-172032r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><br class="fancyvrb" /><a 
 id="x71-172034r14"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> VERS_2.0</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-172036r15"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> bar1;</span><span 
class="pcrr7t-x-x-144"> bar2;</span><br class="fancyvrb" /><a 
 id="x71-172038r16"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> VERS_1.2;</span></div>
<!--l. 1066--><p class="noindent" >This example version script defines three version nodes. The first version node defined is
<span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.1</span></span>; it has no other dependencies. The script binds the symbol <span class="lstinline"><span 
class="ecss-1200">foo1</span></span> to <span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.1</span></span>. It
reduces a number of symbols to local scope so that they are not visible outside of the shared
library; this is done using wildcard patterns, so that any symbol whose name begins with <span class="lstinline"><span 
class="ecss-1200">old</span></span>,
<span class="lstinline"><span 
class="ecss-1200">original</span></span>, or <span class="lstinline"><span 
class="ecss-1200">new</span></span> is matched. The wildcard patterns available are the same as those used in the
shell when matching filenames (also known as “globbing”).
</p><!--l. 1068--><p class="noindent" >Next, the version script defines node <span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.2</span></span>. This node depends upon <span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.1</span></span>. The script
binds the symbol <span class="lstinline"><span 
class="ecss-1200">foo2</span></span> to the version node <span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.2</span></span>.
</p><!--l. 1070--><p class="noindent" >Finally, the version script defines node <span class="lstinline"><span 
class="ecss-1200">VERS_2</span><span 
class="ecss-1200">.0</span></span>. This node depends upon <span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.2</span></span>. The
scripts binds the symbols <span class="lstinline"><span 
class="ecss-1200">bar1</span></span> and <span class="lstinline"><span 
class="ecss-1200">bar2</span></span> to the version node <span class="lstinline"><span 
class="ecss-1200">VERS_2</span><span 
class="ecss-1200">.0</span></span>.
</p><!--l. 1072--><p class="noindent" >When the linker finds a symbol defined in a library which is not specifically bound to a version
node, it will effectively bind it to an unspecified base version of the library. You can bind all
                                                                                       
                                                                                       
otherwise unspecified symbols to a given version node by using <span class="lstinline"><span 
class="ecss-1200">global</span><span 
class="ecss-1200">:</span><span 
class="ecss-1200"> </span><span 
class="cmsy-10x-x-120">*</span></span> somewhere in the
version script.
</p><!--l. 1074--><p class="noindent" >The names of the version nodes have no specific meaning other than what they might suggest
to the person reading them. The ’2.0’ version could just as well have appeared in
between ’1.1’ and ’1.2’. However, this would be a confusing way to write a version
script.
</p><!--l. 1076--><p class="noindent" >Node name can be omited, provided it is the only version node in the version script. Such
version script doesn’t assign any versions to symbols, only selects which symbols will be globally
visible out and which won’t.
</p><!--l. 1078--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb261"><a 
 id="x71-172040r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> global:</span><span 
class="pcrr7t-x-x-144"> foo;</span><span 
class="pcrr7t-x-x-144"> bar;</span><span 
class="pcrr7t-x-x-144"> local:</span><span 
class="pcrr7t-x-x-144"> &#x22C6;;</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1082--><p class="noindent" >When you link an application against a shared library that has versioned symbols, the
application itself knows which version of each symbol it requires, and it also knows which
version nodes it needs from each shared library it is linked against. Thus at runtime, the
dynamic loader can make a quick check to make sure that the libraries you have linked against
do in fact supply all of the version nodes that the application will need to resolve all of the
dynamic symbols. In this way it is possible for the dynamic linker to know with certainty that
all external symbols that it needs will be resolvable without having to search for each symbol
reference.
</p><!--l. 1084--><p class="noindent" >The symbol versioning is in effect a much more sophisticated way of doing minor version
checking that SunOS does. The fundamental problem that is being addressed here is that
typically references to external functions are bound on an as-needed basis, and are not all
bound when the application starts up. If a shared library is out of date, a required
interface may be missing; when the application tries to use that interface, it may
suddenly and unexpectedly fail. With symbol versioning, the user will get a warning
when they start their program if the libraries being used with the application are too
old.
</p><!--l. 1086--><p class="noindent" >There are several GNU extensions to Sun’s versioning approach. The first of these is the ability
to bind a symbol to a version node in the source file where the symbol is defined instead of in
the versioning script. This was done mainly to reduce the burden on the library maintainer. You
can do this by putting something like:
</p><!--l. 1088--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb262"><a 
 id="x71-172042r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __asm__(".symver</span><span 
class="pcrr7t-x-x-144"> original_foo,foo@VERS_1.1");</span></div>
<!--l. 1092--><p class="noindent" >in the C source file. This renames the function <span class="lstinline"><span 
class="ecss-1200">original_foo</span></span> to be an alias for <span class="lstinline"><span 
class="ecss-1200">foo</span></span> bound to
the version node <span class="lstinline"><span 
class="ecss-1200">VERS_1</span><span 
class="ecss-1200">.1</span></span>. The <span class="lstinline"><span 
class="ecss-1200">local</span><span 
class="ecss-1200">:</span></span> directive can be used to prevent the symbol
<span class="lstinline"><span 
class="ecss-1200">original_foo</span></span> from being exported. A <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">symver</span></span> directive takes precedence over a version
script.
                                                                                       
                                                                                       
</p><!--l. 1094--><p class="noindent" >The second GNU extension is to allow multiple versions of the same function to appear in a
given shared library. In this way you can make an incompatible change to an interface without
increasing the major version number of the shared library, while still allowing applications
linked against the old interface to continue to function.
</p><!--l. 1096--><p class="noindent" >To do this, you must use multiple <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">symver</span></span> directives in the source file. Here is an
example:
</p><!--l. 1098--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb263"><a 
 id="x71-172044r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __asm__(".symver</span><span 
class="pcrr7t-x-x-144"> original_foo,foo@");</span>
<br class="fancyvrb" /><a 
 id="x71-172046r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __asm__(".symver</span><span 
class="pcrr7t-x-x-144"> old_foo,foo@VERS_1.1");</span>
<br class="fancyvrb" /><a 
 id="x71-172048r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __asm__(".symver</span><span 
class="pcrr7t-x-x-144"> old_foo1,foo@VERS_1.2");</span>
<br class="fancyvrb" /><a 
 id="x71-172050r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> __asm__(".symver</span><span 
class="pcrr7t-x-x-144"> new_foo,foo@@VERS_2.0");</span></div>
<!--l. 1105--><p class="noindent" >In this example, <span class="lstinline"><span 
class="ecss-1200">foo@</span></span> represents the symbol <span class="lstinline"><span 
class="ecss-1200">foo</span></span> bound to the unspecified base version of the
symbol. The source file that contains this example would define 4 C functions: <span class="lstinline"><span 
class="ecss-1200">original_foo</span></span>,
<span class="lstinline"><span 
class="ecss-1200">old_foo</span></span>, <span class="lstinline"><span 
class="ecss-1200">old_foo1</span></span>, and <span class="lstinline"><span 
class="ecss-1200">new_foo</span></span>.
</p><!--l. 1107--><p class="noindent" >When you have multiple definitions of a given symbol, there needs to be some way to specify a
default version to which external references to this symbol will be bound. You can do this with
the <span class="lstinline"><span 
class="ecss-1200">foo@@VERS_2</span><span 
class="ecss-1200">.0</span></span> type of <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">symver</span></span> directive. You can only declare one version of a symbol as
the default in this manner; otherwise you would effectively have multiple definitions of the same
symbol.
</p><!--l. 1110--><p class="noindent" >If you wish to bind a reference to a specific version of the symbol within the shared library, you
can use the aliases of convenience (i.e. <span class="lstinline"><span 
class="ecss-1200">old_foo</span></span>), or you can use the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">symver</span></span> directive to
specifically bind to an external version of the function in question.
</p><!--l. 1112--><p class="noindent" >You can also specify the language in the version script:
</p><!--l. 1114--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb264"><a 
 id="x71-172052r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> VERSION</span><span 
class="pcrr7t-x-x-144"> extern</span><span 
class="pcrr7t-x-x-144"> "lang"</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> version-script-commands</span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1118--><p class="noindent" >The supported <span class="lstinline"><span 
class="ecss-1200">lang</span></span>s are ’C’, ’C++’, and ’Java’. The linker will iterate over the list of symbols
at the link time and demangle them according to ’lang’ before matching them to the patterns
specified in ’version-script-commands’.
</p><!--l. 1120--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.14</span>  <a 
href="#x71-17300020.2.14" id="x71-17300020.2.14">Expressions in Linker Scripts</a></h4>
<a 
 id="dx71-173001"></a>
                                                                                       
                                                                                       
<a 
 id="dx71-173002"></a>
<!--l. 1124--><p class="noindent" >The syntax for expressions in the linker script language is identical to that of C expressions.
All expressions are evaluated as integers. All expressions are evaluated in the same
size, which is 32 bits if both the host and target are 32 bits, and is otherwise 64
bits.
</p><!--l. 1126--><p class="noindent" >You can use and set symbol values in expressions.
</p><!--l. 1128--><p class="noindent" >The linker defines several special purpose builtin functions for use in expressions.
</p><!--l. 1130--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.15</span>  <a 
href="#x71-17400020.2.15" id="x71-17400020.2.15">Constants</a></h4>
<a 
 id="dx71-174001"></a>
<a 
 id="dx71-174002"></a>
<!--l. 1134--><p class="noindent" >All constants are integers.
</p><!--l. 1136--><p class="noindent" >As in C, the linker considers an integer beginning with ’0’ to be octal, and an integer
beginning with ’0x’ or ’0X’ to be hexadecimal. The linker considers other integers to be
decimal.
<a 
 id="dx71-174003"></a>
<a 
 id="dx71-174004"></a>
<a 
 id="dx71-174005"></a>
<a 
 id="dx71-174006"></a>
</p><!--l. 1143--><p class="noindent" >In addition, you can use the suffixes <span class="lstinline"><span 
class="ecss-1200">K</span></span> and <span class="lstinline"><span 
class="ecss-1200">M</span></span> to scale a constant by 1024 or 1024<sup><span 
class="cmr-8">2</span></sup> respectively.
For example, the following all refer to the same quantity:
</p><!--l. 1146--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb265"><a 
 id="x71-174008r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _fourk_1</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 4K;</span><br class="fancyvrb" /><a 
 id="x71-174010r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _fourk_2</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 4096;</span><br class="fancyvrb" /><a 
 id="x71-174012r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> _fourk_3</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x1000;</span></div>
<!--l. 1152--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.16</span>  <a 
href="#x71-17500020.2.16" id="x71-17500020.2.16">Symbol Names</a></h4>
<a 
 id="dx71-175001"></a>
<a 
 id="dx71-175002"></a>
<a 
 id="dx71-175003"></a>
                                                                                       
                                                                                       
<!--l. 1157--><p class="noindent" >Unless quoted, symbol names start with a letter, underscore, or period and may include letters,
digits, underscores, periods, and hyphens. Unquoted symbol names must not conflict with any
keywords. You can specify a symbol which contains odd characters or has the same name as a
keyword by surrounding the symbol name in double quotes:
</p><!--l. 1159--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb266"><a 
 id="x71-175005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> "SECTION"</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 9;</span><br class="fancyvrb" /><a 
 id="x71-175007r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> "with</span><span 
class="pcrr7t-x-x-144"> a</span><span 
class="pcrr7t-x-x-144"> space"</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> "also</span><span 
class="pcrr7t-x-x-144"> with</span><span 
class="pcrr7t-x-x-144"> a</span><span 
class="pcrr7t-x-x-144"> space"</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> 10;</span></div>
<!--l. 1164--><p class="noindent" >Since symbols can contain many non-alphabetic characters, it is safest to delimit symbols with
spaces. For example, ’A-B’ is one symbol, whereas ’A - B’ is an expression involving
subtraction.
</p><!--l. 1166--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.17</span>  <a 
href="#x71-17600020.2.17" id="x71-17600020.2.17">The Location Counter</a></h4>
<a 
 id="dx71-176001"></a>
<a 
 id="dx71-176002"></a>
<!--l. 1170--><p class="noindent" >The special linker variable <span 
class="cmsl-12">dot </span>’.’ always contains the current output location counter. Since the
<span class="lstinline"><span 
class="ecss-1200">.</span></span> always refers to a location in an output section, it may only appear in an expression within a
<span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> command. The <span class="lstinline"><span 
class="ecss-1200">.</span></span> symbol may appear anywhere that an ordinary symbol is allowed in
an expression.
<a 
 id="dx71-176003"></a>
</p><!--l. 1173--><p class="noindent" >Assigning a value to <span class="lstinline"><span 
class="ecss-1200">.</span></span> will cause the location counter to be moved. This may be used to create
holes in the output section. The location counter may never be moved backwards.
</p><!--l. 1175--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb267"><a 
 id="x71-176005r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-176007r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-176009r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> output</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-176011r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-176013r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> file1(.text)</span>
<br class="fancyvrb" /><a 
 id="x71-176015r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> 1000;</span><br class="fancyvrb" /><a 
 id="x71-176017r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> file2(.text)</span><br class="fancyvrb" /><a 
 id="x71-176019r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> +=</span><span 
class="pcrr7t-x-x-144"> 1000;</span>
<br class="fancyvrb" /><a 
 id="x71-176021r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> file3(.text)</span><br class="fancyvrb" /><a 
 id="x71-176023r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x12345678;</span><br class="fancyvrb" /><a 
 id="x71-176025r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1189--><p class="noindent" >In the previous example, the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section from <span 
class="cmtt-12">file1 </span>is located at the beginning of
the output section <span class="lstinline"><span 
class="ecss-1200">output</span></span>. It is followed by a 1000 byte gap. Then the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section
from <span 
class="cmtt-12">file2 </span>appears, also with a 1000 byte gap following before the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section from
<span 
class="cmtt-12">file3</span>. The notation <span class="lstinline"><span 
class="ecss-1200">=</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x12345678</span></span> specifies what data to write in the gaps (see
<a 
href="#x71-16800020.2.9.5">Listing 20.2.9.5</a>).
<a 
 id="dx71-176026"></a>
</p>
                                                                                       
                                                                                       
<div class="center" 
>
<!--l. 1192--><p class="noindent" >
</p>
<div 
class="colorbox" id="colorbox113"><span 
class="cmbx-12">Note:</span><br 
class="newline" /><span class="lstinline"><span 
class="ecss-1200">.</span></span> actually  refers  to  the  byte  offset  from  the  start  of  the  current
containing object. Normally this is the <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> statement, who’s
start address is 0, hence <span class="lstinline"><span 
class="ecss-1200">.</span></span> can be used as an absolute address. If <span class="lstinline"><span 
class="ecss-1200">.</span></span> is
used inside a section description however, it refers to the byte offset
from the start of that section, not an absolute address.             </div>
</div>
<!--l. 1193--><p class="noindent" >Thus in a script like this:
</p><!--l. 1195--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb268"><a 
 id="x71-176028r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-176030r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-176032r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x100</span><br class="fancyvrb" /><a 
 id="x71-176034r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text:</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-176036r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span>
<br class="fancyvrb" /><a 
 id="x71-176038r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x200</span><br class="fancyvrb" /><a 
 id="x71-176040r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-176042r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> 0x500</span><br class="fancyvrb" /><a 
 id="x71-176044r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data:</span><span 
class="pcrr7t-x-x-144"> {</span>
<br class="fancyvrb" /><a 
 id="x71-176046r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><br class="fancyvrb" /><a 
 id="x71-176048r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> +=</span><span 
class="pcrr7t-x-x-144"> 0x600</span><br class="fancyvrb" /><a 
 id="x71-176050r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-176052r13"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1211--><p class="noindent" >The <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> section will be assigned a starting address of 0x100 and a size of exactly 0x200 bytes,
even if there is not enough data in the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span> input sections to fill this area. (If there is too much
data, an error will be produced because this would be an attempt to move <span class="lstinline"><span 
class="ecss-1200">.</span></span> backwards). The
<span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> section will start at 0x500 and it will have an extra 0x600 bytes worth of space after the
end of the values from the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> input sections and before the end of the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> output section
itself.
</p><!--l. 1213--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.18</span>  <a 
href="#x71-17700020.2.18" id="x71-17700020.2.18">Operators</a></h4>
<a 
 id="dx71-177001"></a>
<a 
 id="dx71-177002"></a>
<a 
 id="dx71-177003"></a>
<!--l. 1218--><p class="noindent" >The linker recognizes the standard C set of arithmetic operators, with the standard bindings
and precedence levels:
</p>
<div class="pic-tabular">
                                                                                       
                                                                                       
<img 
src="main_gcc_ug34x.png" alt=""  /></div>
<!--l. 1236--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.19</span>  <a 
href="#x71-17800020.2.19" id="x71-17800020.2.19">Evaluation</a></h4>
<a 
 id="dx71-178001"></a>
<a 
 id="dx71-178002"></a>
<!--l. 1239--><p class="noindent" >The linker evaluates expressions lazily. It only computes the value of an expression when
absolutely necessary.
</p><!--l. 1241--><p class="noindent" >The linker needs some information, such as the value of the start address of the first section,
and the origins and lengths of memory regions, in order to do any linking at all.
These values are computed as soon as possible when the linker reads in the linker
script.
</p><!--l. 1243--><p class="noindent" >However, other values (such as symbol values) are not known or needed until after storage
allocation. Such values are evaluated later, when other information (such as the sizes of output
sections) is available for use in the symbol assignment expression.
</p><!--l. 1245--><p class="noindent" >The sizes of sections cannot be known until after allocation, so assignments dependent upon
these are not performed until after allocation.
</p><!--l. 1247--><p class="noindent" >Some expressions, such as those depending upon the location counter <span class="lstinline"><span 
class="ecss-1200">.</span></span>, must be evaluated
during section allocation.
</p><!--l. 1249--><p class="noindent" >If the result of an expression is required, but the value is not available, then an error results. For
example, a script like the following
</p><!--l. 1251--><p class="noindent" >
</p>
                                                                                       
                                                                                       
<div class="fancyvrb" id="fancyvrb269"><a 
 id="x71-178004r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-178006r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-178008r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> 9+this_isnt_constant</span><span 
class="pcrr7t-x-x-144"> :</span>
<br class="fancyvrb" /><a 
 id="x71-178010r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.text)</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-178012r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1259--><p class="noindent" >will cause the error message <span class="lstinline"><span 
class="ecss-1200">non</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">constant</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">expression</span><span 
class="ecss-1200"> </span><span 
class="ecsx-1200">for</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">initial</span><span 
class="ecss-1200"> </span><span 
class="ecss-1200">address</span></span>.
</p><!--l. 1261--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.20</span>  <a 
href="#x71-17900020.2.20" id="x71-17900020.2.20">The Section of an Expression</a></h4>
<a 
 id="dx71-179001"></a>
<a 
 id="dx71-179002"></a>
<a 
 id="dx71-179003"></a>
<a 
 id="dx71-179004"></a>
<a 
 id="dx71-179005"></a>
<a 
 id="dx71-179006"></a>
<!--l. 1268--><p class="noindent" >When the linker evaluates an expression, the result is either absolute or relative to
some section. A relative expression is expressed as a fixed offset from the base of a
section.
</p><!--l. 1270--><p class="noindent" >The position of the expression within the linker script determines whether it is absolute or
relative. An expression which appears within an output section definition is relative
to the base of the output section. An expression which appears elsewhere will be
absolute.
</p><!--l. 1272--><p class="noindent" >A symbol set to a relative expression will be relocatable if you request relocatable output using
the <span class="lstinline"><span 
class="cmsy-10x-x-120">-</span><span 
class="ecss-1200">r</span></span> option. That means that a further link operation may change the value of the symbol.
The symbol’s section will be the section of the relative expression.
</p><!--l. 1274--><p class="noindent" >A symbol set to an absolute expression will retain the same value through any further link
operation. The symbol will be absolute, and will not have any particular associated
section.
</p><!--l. 1276--><p class="noindent" >You can use the builtin function <span class="lstinline"><span 
class="ecss-1200">ABSOLUTE</span></span> to force an expression to be absolute when it
would otherwise be relative. For example, to create an absolute symbol set to the address of the
end of the output section <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span>:
</p><!--l. 1278--><p class="noindent" >
</p>
<div class="fancyvrb" id="fancyvrb270"><a 
 id="x71-179008r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><br class="fancyvrb" /><a 
 id="x71-179010r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-179012r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span><span 
class="pcrr7t-x-x-144"> _edata</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ABSOLUTE(.);</span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-179014r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
<!--l. 1285--><p class="noindent" >If <span class="lstinline"><span 
class="ecss-1200">ABSOLUTE</span></span> were not used, <span class="lstinline"><span 
class="ecss-1200">_edata</span></span> would be relative to the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> section.
                                                                                       
                                                                                       
</p><!--l. 1287--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.21</span>  <a 
href="#x71-18000020.2.21" id="x71-18000020.2.21">Builtin Functions</a></h4>
<a 
 id="dx71-180001"></a>
<!--l. 1289--><p class="noindent" >The linker script language includes a number of builtin functions for use in linker script
expressions.
</p><!--l. 1291--><p class="noindent" >
                  </p><dl class="list1"><dt class="list">
<span class="verb"><span 
class="pcrr8t-">ABSOLUTE(&#x003C;exp&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1292--><p class="noindent" ><a 
 id="dx71-180002"></a> <a 
 id="dx71-180003"></a>Return the absolute (non-relocatable, as opposed to non-negative)
                  value of the expression <span 
class="cmmi-12">&#x003C;</span>exp<span 
class="cmmi-12">&#x003E;</span>. Primarily useful to assign an absolute
                  value to a symbol within a section definition, where symbol values are
                  normally section relative. (see <a 
href="#x71-17900020.2.20">Listing 20.2.20</a>).
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">ADDR(&#x003C;section&#x003E;)</span></span> </dt><dd 
class="list">
                  <!--l. 1294--><p class="noindent" ><a 
 id="dx71-180004"></a><a 
 id="dx71-180005"></a> Return the absolute address (the VMA) of the named <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E;</span>. Your
                  script must previously have defined the location of that section. In
                  the following example, <span class="lstinline"><span 
class="ecss-1200">symbol_1</span></span> and <span class="lstinline"><span 
class="ecss-1200">symbol_2</span></span> are assigned identical
                  values:
                  </p><!--l. 1298--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb271"><a 
 id="x71-180007r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180009r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .output1</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-180011r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span>
                  <br class="fancyvrb" /><a 
 id="x71-180013r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> start_of_output_1</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ABSOLUTE(.);</span><br class="fancyvrb" /><a 
 id="x71-180015r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180017r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span>
                  <br class="fancyvrb" /><a 
 id="x71-180019r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .output</span><span 
class="pcrr7t-x-x-144"> :</span><br class="fancyvrb" /><a 
 id="x71-180021r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-180023r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> symbol_1</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ADDR(.output1);</span>
                  <br class="fancyvrb" /><a 
 id="x71-180025r10"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> symbol_2</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> start_of_output_1;</span><br class="fancyvrb" /><a 
 id="x71-180027r11"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-180029r12"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><span 
class="pcrr7t-x-x-144"> }</span></div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">ALIGN(&#x003C;exp&#x003E;)</span></span>     </dt><dd 
class="list">
                  <!--l. 1312--><p class="noindent" ><a 
 id="dx71-180030"></a><a 
 id="dx71-180031"></a> <a 
 id="dx71-180032"></a>Return the location counter (<span class="lstinline"><span 
class="ecss-1200">.</span></span>) aligned to the next <span 
class="cmmi-12">&#x003C;</span>exp<span 
class="cmmi-12">&#x003E; </span>boundary.
                  <span 
class="cmmi-12">&#x003C;</span>exp<span 
class="cmmi-12">&#x003E; </span>must be an expression whose value is a power of two. This is
                  equivalent to
                  </p><!--l. 1316--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb272"><a 
 id="x71-180034r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> (.</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> &#x003C;exp&#x003E;</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> 1)</span><span 
class="pcrr7t-x-x-144"> &amp;</span><span 
class="pcrr7t-x-x-144"> ~(&#x003C;exp&#x003E;</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> 1)</span></div>
                  <!--l. 1320--><p class="noindent" ><span class="lstinline"><span 
class="ecss-1200">ALIGN</span></span> doesn’t change the value of the location counter˜it just does
                                                                                       
                                                                                       
                  arithmetic on it. Here is an example which aligns the output <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">data</span></span> section to
                  the next <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x2000</span></span> byte boundary after the preceding section and sets a
                  variable within the section to the next <span class="lstinline"><span 
class="ecss-1200">0</span><span 
class="ecss-1200">x8000</span></span> boundary after the input
                  sections:
                  </p><!--l. 1322--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb273"><a 
 id="x71-180036r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180038r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .data</span><span 
class="pcrr7t-x-x-144"> ALIGN(0x2000):</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-180040r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> &#x22C6;(.data)</span>
                  <br class="fancyvrb" /><a 
 id="x71-180042r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> variable</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> ALIGN(0x8000);</span><br class="fancyvrb" /><a 
 id="x71-180044r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-180046r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><span 
class="pcrr7t-x-x-144"> }</span></div>
                  <!--l. 1331--><p class="noindent" >The first use of <span class="lstinline"><span 
class="ecss-1200">ALIGN</span></span> in this example specifies the location of a section
                  because it is used as the optional <span 
class="cmmi-12">&#x003C;</span>address<span 
class="cmmi-12">&#x003E; </span>attribute of a section definition
                  (see <a 
href="#x71-15300020.2.8.3">Listing 20.2.8.3</a>). The second use of <span class="lstinline"><span 
class="ecss-1200">ALIGN</span></span> is used to define the value of
                  a symbol.
                  </p><!--l. 1333--><p class="noindent" >The builtin function <span class="lstinline"><span 
class="ecss-1200">NEXT</span></span> is closely related to <span class="lstinline"><span 
class="ecss-1200">ALIGN</span></span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">BLOCK(&#x003C;exp&#x003E;)</span></span>     </dt><dd 
class="list">
                  <!--l. 1335--><p class="noindent" ><a 
 id="dx71-180047"></a> This is a synonym for <span class="lstinline"><span 
class="ecss-1200">ALIGN</span></span>, for compatibility with older linker
                  scripts. It is most often seen when setting the address of an output
                  section.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">DATA_SEGMENT_ALIGN(&#x003C;maxpagesize&#x003E;,&#x003C;commonpagesize&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1337--><p class="noindent" ><a 
 id="dx71-180048"></a> This is equivalent to either
                  </p><!--l. 1341--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb274"><a 
 id="x71-180050r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> (ALIGN(&#x003C;maxpagesize&#x003E;)</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> (.</span><span 
class="pcrr7t-x-x-144"> &amp;</span><span 
class="pcrr7t-x-x-144"> (&#x003C;maxpagesize&#x003E;</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> 1)))</span></div>
                  <!--l. 1344--><p class="noindent" >or
</p>
                  <div class="fancyvrb" id="fancyvrb275"><a 
 id="x71-180052r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> (ALIGN(&#x003C;maxpagesize&#x003E;)</span><span 
class="pcrr7t-x-x-144"> +</span><span 
class="pcrr7t-x-x-144"> (.</span><span 
class="pcrr7t-x-x-144"> &amp;</span><span 
class="pcrr7t-x-x-144"> (&#x003C;maxpagesize&#x003E;</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> &#x003C;commonpagesize&#x003E;)))</span></div>
                  <!--l. 1349--><p class="noindent" >depending on whether the latter uses fewer <span 
class="cmmi-12">&#x003C;</span>commonpagesize<span 
class="cmmi-12">&#x003E; </span>sized pages
                  for the data segment (area between the result of this expression and
                  <span class="lstinline"><span 
class="ecss-1200">DATA_SEGMENT_END</span></span>) than the former or not. If the latter form is used, it
                  means <span 
class="cmmi-12">&#x003C;</span>commonpagesize<span 
class="cmmi-12">&#x003E; </span>bytes of runtime memory will be saved at the
                  expense of up to <span 
class="cmmi-12">&#x003C;</span>commonpagesize<span 
class="cmmi-12">&#x003E; </span>wasted bytes in the on-disk
                  file.
                  </p><!--l. 1351--><p class="noindent" >This expression can only be used directly in <span class="lstinline"><span 
class="ecss-1200">SECTIONS</span></span> commands, not in
                  any output section descriptions and only once in the linker script.
                                                                                       
                                                                                       
                  <span 
class="cmmi-12">&#x003C;</span>commonpagesize<span 
class="cmmi-12">&#x003E; </span>should be less or equal to <span 
class="cmmi-12">&#x003C;</span>maxpagesize<span 
class="cmmi-12">&#x003E; </span>and should
                  be the system page size the object wants to be optimized for (while still
                  working on system page sizes up to <span 
class="cmmi-12">&#x003C;</span>maxpagesize<span 
class="cmmi-12">&#x003E;</span>).
                  </p><!--l. 1354--><p class="noindent" >Example:
                  </p><!--l. 1356--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb276"><a 
 id="x71-180054r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> DATA_SEGMENT_ALIGN(0x10000,</span><span 
class="pcrr7t-x-x-144"> 0x2000);</span></div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">DATA_SEGMENT_END(&#x003C;exp&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1359--><p class="noindent" ><a 
 id="dx71-180055"></a> This defines the end of data segment for <span class="lstinline"><span 
class="ecss-1200">DATA_SEGMENT_ALIGN</span></span>
                  evaluation purposes.
                  </p><!--l. 1362--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb277"><a 
 id="x71-180057r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> DATA_SEGMENT_END(.);</span></div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">DEFINED(&#x003C;symbol&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1365--><p class="noindent" ><a 
 id="dx71-180058"></a><a 
 id="dx71-180059"></a> Return 1 if <span 
class="cmmi-12">&#x003C;</span>symbol<span 
class="cmmi-12">&#x003E; </span>is in the linker global symbol table and is defined,
                  otherwise return 0. You can use this function to provide default values
                  for symbols. For example, the following script fragment shows
                  how to set a global symbol <span class="lstinline"><span 
class="ecss-1200">begin</span></span> to the first location in the <span class="lstinline"><span 
class="ecss-1200">.</span><span 
class="ecss-1200">text</span></span>
                  section˜but if a symbol called <span class="lstinline"><span 
class="ecss-1200">begin</span></span> already existed, its value is
                  preserved:
                  </p><!--l. 1368--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb278"><a 
 id="x71-180061r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS</span><span 
class="pcrr7t-x-x-144"> {</span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180063r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .text</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> {</span>
                  <br class="fancyvrb" /><a 
 id="x71-180065r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> begin</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> DEFINED(begin)</span><span 
class="pcrr7t-x-x-144"> ?</span><span 
class="pcrr7t-x-x-144"> begin</span><span 
class="pcrr7t-x-x-144"> :</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span>
                  <br class="fancyvrb" /><a 
 id="x71-180067r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180069r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-180071r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180073r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span></div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">LOADADDR(&#x003C;section&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1377--><p class="noindent" ><a 
 id="dx71-180074"></a> <a 
 id="dx71-180075"></a>Return the absolute LMA of the named <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E;</span>. This is normally the
                  same as <span class="lstinline"><span 
class="ecss-1200">ADDR</span></span>, but it may be different if the <span class="lstinline"><span 
class="ecss-1200">AT</span></span> attribute is used in the
                  output section definition (<a 
href="#x71-16500020.2.9.2">Listing 20.2.9.2</a>).
                  </p></dd><dt class="list">
                                                                                       
                                                                                       
<span class="verb"><span 
class="pcrr8t-">MAX(&#x003C;exp1&#x003E;, &#x003C;exp2&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1380--><p class="noindent" ><a 
 id="dx71-180076"></a> Returns the maximum of <span 
class="cmmi-12">&#x003C;</span>exp1<span 
class="cmmi-12">&#x003E; </span>and <span 
class="cmmi-12">&#x003C;</span>exp2<span 
class="cmmi-12">&#x003E;</span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">MIN(&#x003C;exp1&#x003E;, &#x003C;exp2&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1382--><p class="noindent" ><a 
 id="dx71-180077"></a> Returns the minimum of <span 
class="cmmi-12">&#x003C;</span>exp1<span 
class="cmmi-12">&#x003E; </span>and <span 
class="cmmi-12">&#x003C;</span>exp2<span 
class="cmmi-12">&#x003E;</span>.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">NEXT(&#x003C;exp&#x003E;)</span></span>      </dt><dd 
class="list">
                  <!--l. 1384--><p class="noindent" ><a 
 id="dx71-180078"></a><a 
 id="dx71-180079"></a> Return the next unallocated address that is a multiple of <span 
class="cmmi-12">&#x003C;</span>exp<span 
class="cmmi-12">&#x003E;</span>. This
                  function is closely related to <span class="lstinline"><span 
class="ecss-1200">ALIGN</span><span 
class="ecss-1200">(&#x003C;</span><span 
class="ecss-1200">exp</span><span 
class="ecss-1200">&#x003E;)</span></span>; unless you use the <span class="lstinline"><span 
class="ecss-1200">MEMORY</span></span>
                  command to define discontinuous memory for the output file, the two
                  functions are equivalent.
                  </p></dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">SIZEOF(&#x003C;section&#x003E;)</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1387--><p class="noindent" ><a 
 id="dx71-180080"></a><a 
 id="dx71-180081"></a> Return the size in bytes of the named <span 
class="cmmi-12">&#x003C;</span>section<span 
class="cmmi-12">&#x003E;</span>, if that section has been
                  allocated. If the section has not been allocated when this is evaluated, the
                  linker will report an error. In the following example, <span class="lstinline"><span 
class="ecss-1200">symbol_1</span></span> and <span class="lstinline"><span 
class="ecss-1200">symbol_2</span></span>
                  are assigned identical values:
                  </p><!--l. 1390--><p class="noindent" >
</p>
                  <div class="fancyvrb" id="fancyvrb279"><a 
 id="x71-180083r1"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> SECTIONS{</span><span 
class="pcrr7t-x-x-144"> ...</span><br class="fancyvrb" /><a 
 id="x71-180085r2"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .output</span><span 
class="pcrr7t-x-x-144"> {</span><br class="fancyvrb" /><a 
 id="x71-180087r3"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .start</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-180089r4"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span>
                  <br class="fancyvrb" /><a 
 id="x71-180091r5"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> .end</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .</span><span 
class="pcrr7t-x-x-144"> ;</span><br class="fancyvrb" /><a 
 id="x71-180093r6"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> }</span><br class="fancyvrb" /><a 
 id="x71-180095r7"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> symbol_1</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> .end</span><span 
class="pcrr7t-x-x-144"> -</span><span 
class="pcrr7t-x-x-144"> .start</span><span 
class="pcrr7t-x-x-144"> ;</span>
                  <br class="fancyvrb" /><a 
 id="x71-180097r8"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> symbol_2</span><span 
class="pcrr7t-x-x-144"> =</span><span 
class="pcrr7t-x-x-144"> SIZEOF(.output);</span><br class="fancyvrb" /><a 
 id="x71-180099r9"></a><span 
class="pcrr7t-x-x-144"> </span><span 
class="pcrr7t-x-x-144"> ...</span><span 
class="pcrr7t-x-x-144"> }</span></div>
                  </dd><dt class="list">
<span class="verb"><span 
class="pcrr8t-">SIZEOF_HEADERS, sizeof_headers</span></span><br 
class="newline" />                  </dt><dd 
class="list">
                  <!--l. 1402--><p class="noindent" ><a 
 id="dx71-180100"></a> <a 
 id="dx71-180101"></a>Return the size in bytes of the output file’s headers. This is information
                  which appears at the start of the output file. You can use this number when
                  setting the start address of the first section, if you choose, to facilitate
                  paging. <a 
 id="dx71-180102"></a><a 
 id="dx71-180103"></a> When producing an ELF output file, if the linker script uses the
                  <span class="lstinline"><span 
class="ecss-1200">SIZEOF_HEADERS</span></span> builtin function, the linker must compute the number of
                  program headers before it has determined all the section addresses and sizes.
                  If the linker later discovers that it needs additional program headers, it
                  will report an error <span 
class="cmtt-12">not enough room for program headers</span>. To
                  avoid this error, you must avoid using the <span class="lstinline"><span 
class="ecss-1200">SIZEOF_HEADERS</span></span>
                  function, or you must rework your linker script to avoid forcing
                  the linker to use additional program headers, or you must define
                  the program headers yourself using the <span class="lstinline"><span 
class="ecss-1200">PHDRS</span></span> command (see
                  <a 
href="#x71-17100020.2.12">Listing 20.2.12</a>).</p></dd></dl>
                                                                                       
                                                                                       
<!--l. 1410--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.2.22</span>  <a 
href="#x71-18100020.2.22" id="x71-18100020.2.22">Implicit Linker Scripts</a></h4>
<a 
 id="dx71-181001"></a>
<!--l. 1412--><p class="noindent" >If you specify a linker input file which the linker can not recognize as an object file or an archive
file, it will try to read the file as a linker script. If the file can not be parsed as a linker script,
the linker will report an error.
</p><!--l. 1414--><p class="noindent" >An implicit linker script will not replace the default linker script.
</p><!--l. 1416--><p class="noindent" >Typically an implicit linker script would contain only symbol assignments, or the <span 
class="cmtt-12">INPUT</span>, <span 
class="cmtt-12">GROUP</span>,
or <span 
class="cmtt-12">VERSION </span>commands.
</p><!--l. 1418--><p class="noindent" >Any input files read because of an implicit linker script will be read at the position in
the command line where the implicit linker script was read. This can affect archive
searching.
                                                                                       
                                                                                       
</p>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="main_gcc_ugse46.html" >next</a>] [<a 
href="main_gcc_ugse45.html" >prev</a>] [<a 
href="main_gcc_ugse45.html#tailmain_gcc_ugse45.html" >prev-tail</a>] [<a 
href="main_gcc_ugli2.html" >front</a>] [<a 
href="main_gcc_ugch20.html#main_gcc_ugli2.html" >up</a>] </p></div>
<!--l. 1--><p class="noindent" ><a 
 id="tailmain_gcc_ugli2.html"></a> </p> 
</body></html> 
